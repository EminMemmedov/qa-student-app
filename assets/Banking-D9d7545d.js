import{t as e}from"./arrow-left-CJeLmIld.js";import{t}from"./circle-alert-BqeA137O.js";import"./circle-check-big-ZpW1P5p_.js";import{t as n}from"./clock-DYGQuP8p.js";import{a as r,c as i,i as ee,l as te,o as a,r as o,t as s}from"./practiceSpecs-DTqsZZs8.js";import{t as ne}from"./loader-circle-_-cXdltp.js";import"./sparkles-Up_RZbv-.js";import"./triangle-alert-KcZqqUDd.js";import{a as c,b as l,f as u,g as d,h as f,i as p,n as m,o as h,t as g}from"./index-BeZEgM9f.js";import{t as _}from"./useGameProgress-h_HpgAh9.js";import"./confetti.module-DdO-Js2X.js";import{t as v}from"./PageTransition-CiJSWDBw.js";import{n as y}from"./confetti-CS5XlM66.js";var b=u(`arrow-left-right`,[[`path`,{d:`M8 3 4 7l4 4`,key:`9rb6wj`}],[`path`,{d:`M4 7h16`,key:`6tx8e3`}],[`path`,{d:`m16 21 4-4-4-4`,key:`siv7j2`}],[`path`,{d:`M20 17H4`,key:`h6l3hr`}]]),x=u(`wallet`,[[`path`,{d:`M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1`,key:`18etb6`}],[`path`,{d:`M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4`,key:`xoc0q4`}]]),S=l(),C=f();function w(){let{foundBugs:l,addBug:u,resetProgress:f,getBugDifficulty:w,xp:T,getBugPoints:E,deductXP:re}=_(),{newAchievement:D,checkAchievements:ie}=m(),{showAnimation:ae,animationData:O,triggerBugAnimation:oe}=o(),{addLog:se,addRequest:ce}=g(),[k,A]=(0,S.useState)(``),[j,M]=(0,S.useState)(``),[N,P]=(0,S.useState)(`other`),[F,I]=(0,S.useState)(`AZN`),[L,le]=(0,S.useState)(500),[R,z]=(0,S.useState)(!1),[B,V]=(0,S.useState)(!1),[H,U]=(0,S.useState)(!1),[W,G]=(0,S.useState)({}),[K,q]=(0,S.useState)({}),[ue,de]=(0,S.useState)([{id:1,amount:50,recipient:`Başqa şəxs`,date:`2024-01-20`,status:`completed`},{id:2,amount:100,recipient:`Başqa şəxs`,date:`2024-01-19`,status:`completed`}]),[J]=(0,S.useState)([{id:`neg_amount`,description:`Mənfi məbləğ göndərmək mümkündür`,severity:`Critical`,priority:`High`},{id:`zero_amount`,description:`0 AZN göndərmək mümkündür`,severity:`Major`,priority:`Medium`},{id:`self_transfer`,description:`Öz kartına pul köçürmək olur`,severity:`Major`,priority:`Medium`},{id:`currency_mix`,description:`AZN hesabdan USD köçürmə (konvertasiyasız)`,severity:`Major`,priority:`Medium`},{id:`balance_limit`,description:`Balansdan çox pul göndərmək olur`,severity:`Critical`,priority:`High`},{id:`success_msg`,description:`Uğursuz əməliyyatda "Uğurlu" mesajı çıxır`,severity:`Major`,priority:`Medium`},{id:`decimal_places`,description:`Məbləğ 10+ onluq yerə qəbul edir (0.0000000001)`,severity:`Minor`,priority:`Low`},{id:`desc_xss`,description:`Təsvir sahəsinə <script> tag yazmaq olur`,severity:`Critical`,priority:`High`},{id:`no_confirmation`,description:`Köçürmə təsdiq dialoqusuz icra olunur`,severity:`Major`,priority:`Medium`},{id:`balance_static`,description:`Balans köçürmədən sonra yenilənmir`,severity:`Critical`,priority:`High`},{id:`card_format`,description:`Kart nömrəsi formatı yoxlanılmır`,severity:`Major`,priority:`Medium`},{id:`amount_label`,description:`Məbləğ labelində hərf səhvi: "Məbləğ" əvəzinə "Mebleg"`,severity:`Minor`,priority:`Low`},{id:`btn_alignment`,description:`Köçürmə düyməsi sola yönəlib (mərkəzdə olmalı)`,severity:`Minor`,priority:`Low`},{id:`border_inconsistent`,description:`Input border qalınlığı fərqlidir`,severity:`Minor`,priority:`Low`},{id:`balance_color`,description:`Balans rəngi oxunması çətindir (ağ fonda ağ)`,severity:`Minor`,priority:`Low`},{id:`icon_missing`,description:`Valyuta seçimində ikon yoxdur`,severity:`Minor`,priority:`Low`},{id:`placeholder_typo`,description:`Placeholder səhvi: "0.00" əvəzinə "0,00"`,severity:`Minor`,priority:`Low`},{id:`focus_color`,description:`Focus border rəngi qırmızıdır (yaşıl olmalı)`,severity:`Minor`,priority:`Low`},{id:`history_missing`,description:`Köçürmə tarixçəsi göstərilmir`,severity:`Major`,priority:`Medium`},{id:`loading_indicator`,description:`Yükləmə göstəricisi yoxdur`,severity:`Major`,priority:`Medium`}]),[fe,pe]=(0,S.useState)(!1),[me,he]=(0,S.useState)(null),Y=e=>{l.includes(e)||(he(e),pe(!0))},X=e=>{let t=u(e);if(t.isNew){let n=J.find(t=>t.id===e);oe({...t,bugName:n.description}),ie({foundBugs:[...l,e],totalBugs:J.length,moduleBugs:{banking:J},getBugDifficulty:w})}},ge=()=>{let e={},t=[],n=parseFloat(k);if(!k)e.amount=`Məbləğ tələb olunur`;else{n<0&&(t.push(`neg_amount`),e.amount=`Mənfi məbləğ göndərilə bilməz`),n===0&&(t.push(`zero_amount`),e.amount=`0 AZN göndərilə bilməz`),n>L&&(t.push(`balance_limit`),e.amount=`Balansınızda kifayət qədər vəsait yoxdur (Balans: ${L} AZN)`);let r=k.split(`.`)[1];r&&r.length>10&&(t.push(`decimal_places`),e.amount=`Məbləğ çox uzun onluq hissəyə malikdir`)}return N===`self`&&(t.push(`self_transfer`),e.recipient=`Öz kartınıza köçürmə edə bilməzsiniz`),F===`USD`&&(t.push(`currency_mix`),e.currency=`AZN hesabdan USD köçürmə mümkün deyil`),(j.includes(`<script>`)||j.includes(`<\/script>`))&&(t.push(`desc_xss`),e.description=`Təsvirdə icazəsiz simvollar var`),t.push(`loading_indicator`),G(e),{isValid:Object.keys(e).length===0,detectedBugs:t}},_e=()=>{let{isValid:e,detectedBugs:t}=ge();if(t.forEach(e=>{X(e),l.includes(e)}),!e){Object.values(W)[0];return}H||X(`no_confirmation`),U(!0)},ve=async()=>{U(!1),V(!0),await new Promise(e=>setTimeout(e,1500)),V(!1),L===L&&X(`balance_static`),X(`success_msg`),A(``),M(``),G({}),q({})},Z=e=>{q({...K,[e]:!0})},Q=J,$=l.filter(e=>Q.find(t=>t.id===e));return(0,S.useEffect)(()=>{$.length===Q.length&&Q.length>0&&y()},[$.length,Q.length]),(0,C.jsxs)(v,{className:`p-6 pt-12 pb-24 min-h-screen`,children:[(0,C.jsx)(r,{isOpen:R,onClose:()=>z(!1),spec:s.banking}),(0,C.jsx)(h,{children:ae&&O&&(0,C.jsx)(ee,{bugName:O.bugName,points:O.points,onComplete:()=>{}})}),D&&(0,C.jsx)(p,{achievement:D,onClose:()=>{}}),(0,C.jsx)(h,{children:H&&(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4`,onClick:()=>U(!1),children:(0,C.jsxs)(c.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:e=>e.stopPropagation(),className:`bg-white rounded-2xl p-5 shadow-2xl w-full max-w-sm`,children:[(0,C.jsx)(`h3`,{className:`text-lg font-bold text-slate-900 mb-3`,children:`Köçürməni təsdiqləyin`}),(0,C.jsxs)(`div`,{className:`space-y-2 mb-5 text-sm text-slate-600`,children:[(0,C.jsxs)(`p`,{children:[(0,C.jsx)(`strong`,{className:`text-slate-900`,children:`Məbləğ:`}),` `,k,` `,F]}),(0,C.jsxs)(`p`,{children:[(0,C.jsx)(`strong`,{className:`text-slate-900`,children:`Alıcı:`}),` `,N===`self`?`Özünüzə`:`Başqa şəxs`]}),j&&(0,C.jsxs)(`p`,{children:[(0,C.jsx)(`strong`,{className:`text-slate-900`,children:`Təsvir:`}),` `,j]})]}),(0,C.jsxs)(`div`,{className:`flex gap-3`,children:[(0,C.jsx)(`button`,{onClick:()=>U(!1),className:`flex-1 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors text-sm`,children:`Ləğv et`}),(0,C.jsx)(`button`,{onClick:ve,className:`flex-1 py-2.5 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors text-sm`,children:`Təsdiq et`})]})]})})})}),(0,C.jsxs)(`header`,{className:`mb-8`,children:[(0,C.jsxs)(d,{to:`/practice`,className:`inline-flex items-center text-slate-500 mb-4 hover:text-slate-800 transition-colors`,children:[(0,C.jsx)(e,{size:20,className:`mr-1`}),`Geri qayıt`]}),(0,C.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,C.jsxs)(`div`,{children:[(0,C.jsx)(`h1`,{className:`text-3xl font-black text-slate-900 tracking-tight mb-2`,children:`Köçürmələr`}),(0,C.jsxs)(`div`,{className:`flex items-center gap-2 text-slate-500 font-medium`,children:[(0,C.jsx)(i,{size:18}),(0,C.jsxs)(`p`,{children:[`Bu səhifədə `,J.length,` baq gizlənib.`]})]})]}),(0,C.jsx)(`button`,{onClick:()=>z(!0),className:`p-3 bg-indigo-100 text-indigo-600 rounded-xl hover:bg-indigo-200 transition-colors`,children:(0,C.jsx)(te,{size:24})})]})]}),(0,C.jsxs)(`div`,{className:`bg-white p-8 rounded-[2rem] shadow-xl shadow-emerald-200/50 border border-slate-100 relative overflow-hidden mb-8`,children:[(0,C.jsx)(`div`,{className:`absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-emerald-500 to-teal-500`}),(0,C.jsxs)(`div`,{className:`bg-slate-900 text-white p-6 rounded-2xl mb-8 relative overflow-hidden cursor-pointer`,onClick:()=>{Y(`balance_color`,`Balans rəngi oxunması çətindir (ağ fonda ağ)`),se(`error`,`Uncaught ReferenceError: WalletConfig is not defined`,{component:`BalanceCard`,line:42})},children:[(0,C.jsxs)(`div`,{className:`relative z-10`,children:[(0,C.jsx)(`p`,{className:`text-slate-400 text-sm mb-1`,children:`Cari Balans`}),(0,C.jsxs)(`h2`,{className:`text-3xl font-bold text-white`,children:[L.toFixed(2),` AZN`]})]}),(0,C.jsx)(x,{className:`absolute right-4 bottom-4 text-slate-800`,size:64})]}),(0,C.jsxs)(`form`,{onSubmit:e=>{e.preventDefault(),_e()},className:`space-y-6`,children:[(0,C.jsxs)(`div`,{children:[(0,C.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2`,children:`Kimə (Kart nömrəsi)`}),(0,C.jsxs)(`select`,{className:`w-full p-3 border-2 rounded-xl outline-none focus:border-emerald-500 cursor-pointer bg-white transition-colors ${K.recipient&&W.recipient?`border-red-300`:`border-slate-200`}`,value:N,onChange:e=>{P(e.target.value),e.target.value===`other`&&Y(`card_format`,`Kart nömrəsi formatı yoxlanılmır`)},onBlur:()=>Z(`recipient`),children:[(0,C.jsx)(`option`,{value:`other`,children:`Başqa şəxs`}),(0,C.jsx)(`option`,{value:`self`,children:`Özümə (Cari Kart)`})]}),K.recipient&&W.recipient&&(0,C.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,C.jsx)(t,{size:16}),(0,C.jsx)(`span`,{children:W.recipient})]})]}),(0,C.jsxs)(`div`,{children:[(0,C.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2 cursor-pointer`,onClick:()=>Y(`amount_label`,`Məbləğ labelində hərf səhvi: "Məbləğ" əvəzinə "Mebleg"`),children:`Mebleg`}),(0,C.jsxs)(`div`,{className:`flex gap-2`,children:[(0,C.jsxs)(`div`,{className:`flex-1`,children:[(0,C.jsx)(`input`,{type:`number`,step:`0.01`,placeholder:`0,00`,className:`w-full p-3 border-2 rounded-xl outline-none focus:border-red-500 transition-colors ${K.amount&&W.amount?`border-red-300`:`border-slate-200`}`,value:k,onChange:e=>A(e.target.value),onBlur:()=>Z(`amount`),onClick:()=>{Y(`placeholder_typo`,`Placeholder səhvi: "0.00" əvəzinə "0,00"`),Y(`border_inconsistent`,`Input border qalınlığı fərqlidir`),Y(`focus_color`,`Focus border rəngi qırmızıdır (yaşıl olmalı)`)}}),K.amount&&W.amount&&(0,C.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,C.jsx)(t,{size:16}),(0,C.jsx)(`span`,{children:W.amount})]})]}),(0,C.jsxs)(`select`,{className:`w-24 p-3 border-2 rounded-xl outline-none focus:border-emerald-500 cursor-pointer bg-white transition-colors ${K.currency&&W.currency?`border-red-300`:`border-slate-200`}`,value:F,onChange:e=>{I(e.target.value),Y(`icon_missing`,`Valyuta seçimində ikon yoxdur`)},onBlur:()=>Z(`currency`),children:[(0,C.jsx)(`option`,{value:`AZN`,children:`AZN`}),(0,C.jsx)(`option`,{value:`USD`,children:`USD`})]})]}),K.currency&&W.currency&&(0,C.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,C.jsx)(t,{size:16}),(0,C.jsx)(`span`,{children:W.currency})]})]}),(0,C.jsxs)(`div`,{children:[(0,C.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2`,children:`Təsvir (İstəyə görə)`}),(0,C.jsx)(`textarea`,{className:`w-full p-3 border-2 rounded-xl outline-none focus:border-emerald-500 resize-none transition-colors ${K.description&&W.description?`border-red-300`:`border-slate-200`}`,rows:`3`,placeholder:`Köçürmə haqqında qeyd...`,value:j,onChange:e=>M(e.target.value),onBlur:()=>Z(`description`)}),K.description&&W.description&&(0,C.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,C.jsx)(t,{size:16}),(0,C.jsx)(`span`,{children:W.description})]})]}),(0,C.jsx)(`button`,{type:`submit`,disabled:B,className:`w-full py-4 bg-emerald-600 text-white rounded-xl font-bold shadow-lg shadow-emerald-200 hover:bg-emerald-700 transition-colors flex items-center justify-start pl-8 gap-2 cursor-pointer disabled:opacity-50`,onClick:()=>{Y(`btn_alignment`,`Köçürmə düyməsi sola yönəlib (mərkəzdə olmalı)`)},children:B?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ne,{className:`animate-spin`,size:20}),(0,C.jsx)(`span`,{children:`Emal edilir...`})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(b,{size:20}),(0,C.jsx)(`span`,{children:`Köçürmə et`})]})})]}),(0,C.jsx)(`div`,{className:`mt-8 pt-8 border-t border-slate-100 cursor-pointer opacity-0`,onClick:()=>Y(`history_missing`,`Köçürmə tarixçəsi göstərilmir`),children:(0,C.jsxs)(`h3`,{className:`text-sm font-bold text-slate-700 mb-4 flex items-center gap-2`,children:[(0,C.jsx)(n,{size:16}),`Son köçürmələr`]})})]}),(0,C.jsx)(a,{bugs:Q,foundBugs:$,onReset:f,xp:T,getBugPoints:E,getBugDifficulty:w,deductXP:re})]})}export{w as default};