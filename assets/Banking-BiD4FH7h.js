import"./useTranslation-BCVn0i94.js";import{t as e}from"./arrow-left-74vNH2eV.js";import{t}from"./circle-alert-DCkrH_Hy.js";import"./circle-check-big-DdajXeVL.js";import{a as n,i as r,o as ee,r as te,s as i,t as a}from"./practiceSpecs-BdMMI51N.js";import{t as o}from"./clock-DMjbnXrb.js";import{t as s}from"./file-text-DGLpj3aj.js";import{t as ne}from"./loader-circle-B8HNG86a.js";import"./sparkles-Dg8Py2jv.js";import"./terminal-ayPH-SQE.js";import"./triangle-alert-YkZdooIi.js";import{a as c,b as re,g as l,i as u,n as d,o as f,p,t as m,w as h}from"./index-DafDo4Gr.js";import{t as g}from"./useGameProgress-CjIEHxQx.js";import"./confetti.module-DMN0QfNx.js";import{t as _}from"./PageTransition-Dt5AKVBJ.js";import{t as v}from"./bugs-DMwlEXws.js";import{n as y}from"./confetti-CcFCbCdV.js";var ie=p(`arrow-left-right`,[[`path`,{d:`M8 3 4 7l4 4`,key:`9rb6wj`}],[`path`,{d:`M4 7h16`,key:`6tx8e3`}],[`path`,{d:`m16 21 4-4-4-4`,key:`siv7j2`}],[`path`,{d:`M20 17H4`,key:`h6l3hr`}]]),b=p(`wallet`,[[`path`,{d:`M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1`,key:`18etb6`}],[`path`,{d:`M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4`,key:`xoc0q4`}]]),x=h(),S=l();function C(){let{foundBugs:l,addBug:p,resetProgress:h,getBugDifficulty:C,xp:ae,getBugPoints:oe,deductXP:se}=g(),{newAchievement:w,checkAchievements:ce}=d(),{showAnimation:le,animationData:T,triggerBugAnimation:E}=te(),{addLog:D,addRequest:ue}=m(),[O,k]=(0,x.useState)(``),[A,j]=(0,x.useState)(``),[M,N]=(0,x.useState)(`other`),[P,F]=(0,x.useState)(`AZN`),[I,de]=(0,x.useState)(500),[L,R]=(0,x.useState)(!1),[z,B]=(0,x.useState)(!1),[V,H]=(0,x.useState)(!1),[U,W]=(0,x.useState)({}),[G,K]=(0,x.useState)({}),[fe,pe]=(0,x.useState)([{id:1,amount:50,recipient:`Başqa şəxs`,date:`2024-01-20`,status:`completed`},{id:2,amount:100,recipient:`Başqa şəxs`,date:`2024-01-19`,status:`completed`}]),q=v(`banking`),[me,he]=(0,x.useState)(!1),[ge,_e]=(0,x.useState)(null),J=e=>{l.includes(e)||(_e(e),he(!0))},Y=e=>{let t=p(e);if(t.isNew){let n=q.find(t=>t.id===e);E({...t,bugName:n.description}),ce({foundBugs:[...l,e],totalBugs:q.length,moduleBugs:{banking:q},getBugDifficulty:C})}},ve=()=>{let e={},t=[],n=parseFloat(O);if(!O)e.amount=`Məbləğ tələb olunur`;else{n<0&&(t.push(`neg_amount`),e.amount=`Mənfi məbləğ göndərilə bilməz`),n===0&&(t.push(`zero_amount`),e.amount=`0 AZN göndərilə bilməz`),n>I&&(t.push(`balance_limit`),e.amount=`Balansınızda kifayət qədər vəsait yoxdur (Balans: ${I} AZN)`);let r=O.split(`.`)[1];r&&r.length>10&&(t.push(`decimal_places`),e.amount=`Məbləğ çox uzun onluq hissəyə malikdir`)}return M===`self`&&(t.push(`self_transfer`),e.recipient=`Öz kartınıza köçürmə edə bilməzsiniz`),P===`USD`&&(t.push(`currency_mix`),e.currency=`AZN hesabdan USD köçürmə mümkün deyil`),(A.includes(`<script>`)||A.includes(`<\/script>`))&&(t.push(`desc_xss`),e.description=`Təsvirdə icazəsiz simvollar var`),t.push(`loading_indicator`),W(e),{isValid:Object.keys(e).length===0,detectedBugs:t}},ye=()=>{let{isValid:e,detectedBugs:t}=ve();if(t.forEach(e=>{Y(e),l.includes(e)}),!e){Object.values(U)[0];return}V||Y(`no_confirmation`),H(!0)},X=async()=>{H(!1),B(!0),await new Promise(e=>setTimeout(e,1500)),B(!1),I===I&&Y(`balance_static`),Y(`success_msg`),k(``),j(``),W({}),K({})},Z=e=>{K({...G,[e]:!0})},Q=q,$=l.filter(e=>Q.some(t=>t.id===e));return(0,x.useEffect)(()=>{$.length===Q.length&&Q.length>0&&y()},[$.length,Q.length]),(0,S.jsxs)(_,{className:`p-6 pt-12 pb-24 min-h-screen`,children:[(0,S.jsx)(n,{isOpen:L,onClose:()=>R(!1),spec:a.banking}),(0,S.jsx)(f,{children:le&&T&&(0,S.jsx)(r,{bugName:T.bugName,points:T.points,onComplete:()=>{}})}),w&&(0,S.jsx)(u,{achievement:w,onClose:()=>{}}),(0,S.jsx)(f,{children:V&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4`,onClick:()=>H(!1),children:(0,S.jsxs)(c.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:e=>e.stopPropagation(),className:`bg-white rounded-2xl p-5 shadow-2xl w-full max-w-sm`,children:[(0,S.jsx)(`h3`,{className:`text-lg font-bold text-slate-900 mb-3`,children:`Köçürməni təsdiqləyin`}),(0,S.jsxs)(`div`,{className:`space-y-2 mb-5 text-sm text-slate-600`,children:[(0,S.jsxs)(`p`,{children:[(0,S.jsx)(`strong`,{className:`text-slate-900`,children:`Məbləğ:`}),` `,O,` `,P]}),(0,S.jsxs)(`p`,{children:[(0,S.jsx)(`strong`,{className:`text-slate-900`,children:`Alıcı:`}),` `,M===`self`?`Özünüzə`:`Başqa şəxs`]}),A&&(0,S.jsxs)(`p`,{children:[(0,S.jsx)(`strong`,{className:`text-slate-900`,children:`Təsvir:`}),` `,A]})]}),(0,S.jsxs)(`div`,{className:`flex gap-3`,children:[(0,S.jsx)(`button`,{onClick:()=>H(!1),className:`flex-1 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors text-sm`,children:`Ləğv et`}),(0,S.jsx)(`button`,{onClick:X,className:`flex-1 py-2.5 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors text-sm`,children:`Təsdiq et`})]})]})})})}),(0,S.jsxs)(`header`,{className:`mb-8`,children:[(0,S.jsxs)(re,{to:`/practice`,className:`inline-flex items-center text-slate-500 mb-4 hover:text-slate-800 transition-colors`,children:[(0,S.jsx)(e,{size:20,className:`mr-1`}),`Geri qayıt`]}),(0,S.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,S.jsxs)(`div`,{children:[(0,S.jsx)(`h1`,{className:`text-3xl font-black text-slate-900 tracking-tight mb-2`,children:`Köçürmələr`}),(0,S.jsxs)(`div`,{className:`flex items-center gap-2 text-slate-500 font-medium`,children:[(0,S.jsx)(i,{size:18}),(0,S.jsxs)(`p`,{children:[`Bu səhifədə `,q.length,` baq gizlənib.`]})]})]}),(0,S.jsx)(`button`,{onClick:()=>R(!0),className:`p-3 bg-indigo-100 text-indigo-600 rounded-xl hover:bg-indigo-200 transition-colors`,children:(0,S.jsx)(s,{size:24})})]})]}),(0,S.jsxs)(`div`,{className:`bg-white p-8 rounded-[2rem] shadow-xl shadow-emerald-200/50 border border-slate-100 relative overflow-hidden mb-8`,children:[(0,S.jsx)(`div`,{className:`absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-emerald-500 to-teal-500`}),(0,S.jsxs)(`div`,{className:`bg-slate-900 text-white p-6 rounded-2xl mb-8 relative overflow-hidden cursor-pointer`,onClick:()=>{J(`balance_color`,`Balans rəngi oxunması çətindir (ağ fonda ağ)`),D(`error`,`Uncaught ReferenceError: WalletConfig is not defined`,{component:`BalanceCard`,line:42})},children:[(0,S.jsxs)(`div`,{className:`relative z-10`,children:[(0,S.jsx)(`p`,{className:`text-slate-400 text-sm mb-1`,children:`Cari Balans`}),(0,S.jsxs)(`h2`,{className:`text-3xl font-bold text-white`,children:[I.toFixed(2),` AZN`]})]}),(0,S.jsx)(b,{className:`absolute right-4 bottom-4 text-slate-800`,size:64})]}),(0,S.jsxs)(`form`,{onSubmit:e=>{e.preventDefault(),ye()},className:`space-y-6`,children:[(0,S.jsxs)(`div`,{children:[(0,S.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2`,children:`Kimə (Kart nömrəsi)`}),(0,S.jsxs)(`select`,{className:`w-full p-3 border-2 rounded-xl outline-none focus:border-emerald-500 cursor-pointer bg-white transition-colors ${G.recipient&&U.recipient?`border-red-300`:`border-slate-200`}`,value:M,onChange:e=>{N(e.target.value),e.target.value===`other`&&J(`card_format`,`Kart nömrəsi formatı yoxlanılmır`)},onBlur:()=>Z(`recipient`),children:[(0,S.jsx)(`option`,{value:`other`,children:`Başqa şəxs`}),(0,S.jsx)(`option`,{value:`self`,children:`Özümə (Cari Kart)`})]}),G.recipient&&U.recipient&&(0,S.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,S.jsx)(t,{size:16}),(0,S.jsx)(`span`,{children:U.recipient})]})]}),(0,S.jsxs)(`div`,{children:[(0,S.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2 cursor-pointer`,onClick:()=>J(`amount_label`,`Məbləğ labelində hərf səhvi: "Məbləğ" əvəzinə "Mebleg"`),children:`Mebleg`}),(0,S.jsxs)(`div`,{className:`flex gap-2`,children:[(0,S.jsxs)(`div`,{className:`flex-1`,children:[(0,S.jsx)(`input`,{type:`number`,step:`0.01`,placeholder:`0,00`,className:`w-full p-3 border-2 rounded-xl outline-none focus:border-red-500 transition-colors ${G.amount&&U.amount?`border-red-300`:`border-slate-200`}`,value:O,onChange:e=>k(e.target.value),onBlur:()=>Z(`amount`),onClick:()=>{J(`placeholder_typo`,`Placeholder səhvi: "0.00" əvəzinə "0,00"`),J(`border_inconsistent`,`Input border qalınlığı fərqlidir`),J(`focus_color`,`Focus border rəngi qırmızıdır (yaşıl olmalı)`)}}),G.amount&&U.amount&&(0,S.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,S.jsx)(t,{size:16}),(0,S.jsx)(`span`,{children:U.amount})]})]}),(0,S.jsxs)(`select`,{className:`w-24 p-3 border-2 rounded-xl outline-none focus:border-emerald-500 cursor-pointer bg-white transition-colors ${G.currency&&U.currency?`border-red-300`:`border-slate-200`}`,value:P,onChange:e=>{F(e.target.value),J(`icon_missing`,`Valyuta seçimində ikon yoxdur`)},onBlur:()=>Z(`currency`),children:[(0,S.jsx)(`option`,{value:`AZN`,children:`AZN`}),(0,S.jsx)(`option`,{value:`USD`,children:`USD`})]})]}),G.currency&&U.currency&&(0,S.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,S.jsx)(t,{size:16}),(0,S.jsx)(`span`,{children:U.currency})]})]}),(0,S.jsxs)(`div`,{children:[(0,S.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2`,children:`Təsvir (İstəyə görə)`}),(0,S.jsx)(`textarea`,{className:`w-full p-3 border-2 rounded-xl outline-none focus:border-emerald-500 resize-none transition-colors ${G.description&&U.description?`border-red-300`:`border-slate-200`}`,rows:`3`,placeholder:`Köçürmə haqqında qeyd...`,value:A,onChange:e=>j(e.target.value),onBlur:()=>Z(`description`)}),G.description&&U.description&&(0,S.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,S.jsx)(t,{size:16}),(0,S.jsx)(`span`,{children:U.description})]})]}),(0,S.jsx)(`button`,{type:`submit`,disabled:z,className:`w-full py-4 bg-emerald-600 text-white rounded-xl font-bold shadow-lg shadow-emerald-200 hover:bg-emerald-700 transition-colors flex items-center justify-start pl-8 gap-2 cursor-pointer disabled:opacity-50`,onClick:()=>{J(`btn_alignment`,`Köçürmə düyməsi sola yönəlib (mərkəzdə olmalı)`)},children:z?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(ne,{className:`animate-spin`,size:20}),(0,S.jsx)(`span`,{children:`Emal edilir...`})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(ie,{size:20}),(0,S.jsx)(`span`,{children:`Köçürmə et`})]})})]}),(0,S.jsx)(`div`,{className:`mt-8 pt-8 border-t border-slate-100 cursor-pointer opacity-0`,onClick:()=>J(`history_missing`,`Köçürmə tarixçəsi göstərilmir`),children:(0,S.jsxs)(`h3`,{className:`text-sm font-bold text-slate-700 mb-4 flex items-center gap-2`,children:[(0,S.jsx)(o,{size:16}),`Son köçürmələr`]})})]}),(0,S.jsx)(ee,{bugs:Q,foundBugs:$,onReset:h,xp:ae,getBugPoints:oe,getBugDifficulty:C,deductXP:se})]})}export{C as default};