import{t as e}from"./useTranslation-f2J3LijL.js";import{t}from"./arrow-right-Cvavor4y.js";import{t as n}from"./award-CbFp6-Y6.js";import{t as r}from"./circle-check-big-DEEuJ9ng.js";import{t as i}from"./clock-Ckg4fXto.js";import{t as a}from"./sparkles-C73h8nSK.js";import{D as o,T as s,o as c,s as l,y as u}from"./index-BBCZXrKI.js";import{t as d}from"./PageTransition-CEbnjI2E.js";import{i as f,n as p,r as m}from"./examQuestions-DXEtuvmG.js";var h=o();function g(){let[e,t]=(0,h.useState)(`easy`),[n,r]=(0,h.useState)(0),[i,a]=(0,h.useState)(0),[o,s]=(0,h.useState)(new Set),[c,l]=(0,h.useState)(localStorage.getItem(`studentLevel`)||`Beginner`),u=(0,h.useCallback)((c=null)=>{let l=e;if(c===!0){let i=n+1;r(i),a(0),i>=3&&e!==`hard`&&(l=e===`easy`?`medium`:`hard`,t(l),r(0))}else if(c===!1){let n=i+1;a(n),r(0),n>=3&&e!==`easy`&&(l=e===`hard`?`medium`:`easy`,t(l),a(0))}let u=m(l).filter(e=>!o.has(e.id)),f=null;if(u.length>0)f=u[Math.floor(Math.random()*u.length)];else{let e=p.filter(e=>!o.has(e.id));e.length>0&&(f=e[Math.floor(Math.random()*e.length)])}return f&&s(e=>new Set(e).add(f.id)),d(l),{question:f,difficulty:l}},[e,n,i,o]),d=e=>{let t=`Beginner`;e===`medium`&&(t=`Intermediate`),e===`hard`&&(t=`Advanced`),l(t),localStorage.setItem(`studentLevel`,t)};return{getNextQuestion:u,currentDifficulty:e,studentLevel:c,resetExam:()=>{t(`easy`),r(0),a(0),s(new Set)}}}var _=u();function v(){let{t:o}=e(),u=s(),{getNextQuestion:p,currentDifficulty:m,resetExam:v}=g(),[y,b]=(0,h.useState)([]),[x,S]=(0,h.useState)(0),[C,w]=(0,h.useState)(null),[T,E]=(0,h.useState)([]),[D,O]=(0,h.useState)(900),[k,A]=(0,h.useState)(!1),[j,M]=(0,h.useState)(!1);(0,h.useEffect)(()=>{j||b(f(30))},[j]),(0,h.useEffect)(()=>{if(!k||D<=0)return;let e=setInterval(()=>{O(e=>e<=1?(I(),0):e-1)},1e3);return()=>clearInterval(e)},[k,D]);let N=()=>{j&&(v(),b([p(null).question])),O(900),A(!0)},P=e=>{w(e)},F=()=>{let e=[...T];e[x]=C,E(e);let t=C===y[x].correctAnswer;if(j)if(x+1<30){let e=p(t);b(t=>[...t,e.question]),S(x+1),w(null)}else I();else x+1<y.length?(S(x+1),w(T[x+1]??null)):I()},I=()=>{let e=0,t={};y.forEach((n,r)=>{let i=T[r];i===n.correctAnswer&&e++,t[n.category]||(t[n.category]={correct:0,total:0}),t[n.category].total++,i===n.correctAnswer&&t[n.category].correct++}),u(`/practice/exam-results`,{state:{foundCount:e,totalQuestions:y.length,categoryScores:t,userAnswers:T,questions:y,timeSpent:900-D}})},L=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,`0`)}`;if(y.length===0)return(0,_.jsx)(d,{className:`min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-800 flex items-center justify-center`,children:(0,_.jsx)(`div`,{className:`text-slate-600 dark:text-slate-400`,children:`Yüklənir...`})});if(!k)return(0,_.jsx)(d,{className:`min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-800 p-6 pt-12 pb-24`,children:(0,_.jsx)(`div`,{className:`max-w-2xl mx-auto`,children:(0,_.jsxs)(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8`,children:[(0,_.jsx)(`div`,{className:`flex justify-center mb-6`,children:(0,_.jsx)(`div`,{className:`w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center`,children:(0,_.jsx)(n,{size:40,className:`text-white`})})}),(0,_.jsx)(`h1`,{className:`text-3xl font-black text-center text-slate-900 dark:text-white mb-4`,children:`QA Bilik İmtahanı`}),(0,_.jsxs)(`div`,{className:`space-y-4 mb-8`,children:[(0,_.jsxs)(`div`,{className:`flex gap-4 mb-6`,children:[(0,_.jsxs)(`button`,{onClick:()=>M(!1),className:`flex-1 p-4 rounded-xl border-2 transition-all ${j?`border-slate-200 dark:border-slate-700 hover:border-blue-300`:`border-blue-500 bg-blue-50 dark:bg-blue-900/20`}`,children:[(0,_.jsx)(`div`,{className:`font-bold text-slate-900 dark:text-white mb-1`,children:`Standart`}),(0,_.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Təsadüfi suallar`})]}),(0,_.jsxs)(`button`,{onClick:()=>M(!0),className:`flex-1 p-4 rounded-xl border-2 transition-all ${j?`border-purple-500 bg-purple-50 dark:bg-purple-900/20`:`border-slate-200 dark:border-slate-700 hover:border-purple-300`}`,children:[(0,_.jsxs)(`div`,{className:`flex items-center justify-center gap-2 font-bold text-slate-900 dark:text-white mb-1`,children:[`Adaptiv `,(0,_.jsx)(a,{size:14,className:`text-purple-500`})]}),(0,_.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Səviyyəyə uyğun`})]})]}),(0,_.jsxs)(`div`,{className:`flex items-center gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl`,children:[(0,_.jsx)(r,{className:`text-blue-600 dark:text-blue-400`,size:24}),(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`p`,{className:`font-bold text-slate-900 dark:text-white`,children:`30 sual`}),(0,_.jsx)(`p`,{className:`text-sm text-slate-600 dark:text-slate-400`,children:`QA nəzəriyyəsi üzrə`})]})]}),(0,_.jsxs)(`div`,{className:`flex items-center gap-3 p-4 bg-orange-50 dark:bg-orange-900/20 rounded-xl`,children:[(0,_.jsx)(i,{className:`text-orange-600 dark:text-orange-400`,size:24}),(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`p`,{className:`font-bold text-slate-900 dark:text-white`,children:`15 dəqiqə`}),(0,_.jsx)(`p`,{className:`text-sm text-slate-600 dark:text-slate-400`,children:`Vaxt limiti`})]})]}),(0,_.jsxs)(`div`,{className:`flex items-center gap-3 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl`,children:[(0,_.jsx)(n,{className:`text-green-600 dark:text-green-400`,size:24}),(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`p`,{className:`font-bold text-slate-900 dark:text-white`,children:`70% keçid balı`}),(0,_.jsx)(`p`,{className:`text-sm text-slate-600 dark:text-slate-400`,children:`Minimum tələb`})]})]})]}),(0,_.jsxs)(c.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:N,className:`w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all shadow-lg`,children:[`İmtahana Başla`,(0,_.jsx)(t,{size:20})]})]})})});let R=y[x],z=(x+1)/y.length*100;return(0,_.jsx)(d,{className:`min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-800 p-6 pt-12 pb-24`,children:(0,_.jsxs)(`div`,{className:`max-w-3xl mx-auto`,children:[(0,_.jsxs)(`div`,{className:`mb-6 flex items-center justify-between`,children:[(0,_.jsxs)(`div`,{className:`flex items-center gap-2 text-slate-600 dark:text-slate-400`,children:[(0,_.jsxs)(`span`,{className:`font-bold text-lg`,children:[`Sual `,x+1]}),(0,_.jsx)(`span`,{children:`/`}),(0,_.jsx)(`span`,{children:j?30:y.length}),j&&(0,_.jsx)(`span`,{className:`ml-2 px-2 py-1 rounded text-xs font-bold uppercase ${m===`easy`?`bg-green-100 text-green-700`:m===`medium`?`bg-yellow-100 text-yellow-700`:`bg-red-100 text-red-700`}`,children:m})]}),(0,_.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 rounded-xl font-bold ${D<60?`bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400`:`bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400`}`,children:[(0,_.jsx)(i,{size:20}),(0,_.jsx)(`span`,{className:`text-lg font-mono`,children:L(D)})]})]}),(0,_.jsx)(`div`,{className:`w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 mb-8`,children:(0,_.jsx)(c.div,{initial:{width:0},animate:{width:`${z}%`},className:`bg-gradient-to-r from-blue-500 to-indigo-500 h-full rounded-full`})}),(0,_.jsx)(l,{mode:`wait`,children:(0,_.jsxs)(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:`bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 mb-6`,children:[(0,_.jsx)(`h2`,{className:`text-2xl font-bold text-slate-900 dark:text-white mb-8`,children:R.question}),(0,_.jsx)(`div`,{className:`space-y-3`,children:R.options.map((e,t)=>(0,_.jsx)(c.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>P(t),className:`w-full p-4 rounded-xl text-left transition-all ${C===t?`bg-blue-600 text-white shadow-lg`:`bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white hover:bg-slate-100 dark:hover:bg-slate-600`}`,children:(0,_.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,_.jsx)(`div`,{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${C===t?`bg-white text-blue-600`:`bg-slate-200 dark:bg-slate-600 text-slate-600 dark:text-slate-300`}`,children:String.fromCharCode(65+t)}),(0,_.jsx)(`span`,{className:`flex-1`,children:e})]})},t))})]},x)}),(0,_.jsxs)(c.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:F,disabled:C===null,className:`w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all ${C===null?`bg-slate-200 dark:bg-slate-700 text-slate-400 dark:text-slate-500 cursor-not-allowed`:`bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg`}`,children:[x+1===y.length?`Bitir`:`Növbəti Sual`,(0,_.jsx)(t,{size:20})]})]})})}export{v as default};