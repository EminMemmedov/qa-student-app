import"./useTranslation-COMFokZo.js";import{t as e}from"./arrow-left-BsaT0Iw4.js";import{t}from"./circle-alert-CoFeZqcs.js";import"./circle-check-big-Pv5n9IHf.js";import{a as n,i as r,n as i,o as a,r as o,s as ee,t as te}from"./practiceSpecs-Vc9DmnTo.js";import{t as s}from"./file-text-BlfQEO8U.js";import{t as ne}from"./info-sTDauSgX.js";import{t as c}from"./search-Pz2k3qCu.js";import{t as l}from"./loader-circle-DezmnyYh.js";import{t as u}from"./plus-DiTFCz0E.js";import"./sparkles-Da64A9mz.js";import"./terminal-ZHlC6y3-.js";import{t as d}from"./trash-2-BtC-M767.js";import"./triangle-alert-inNzW0tT.js";import{E as f,S as p,h as m,i as re,n as ie,s as ae,t as oe,v as h}from"./index-BXG1BOal.js";import{t as se}from"./useGameProgress-wXOsL0ej.js";import"./confetti.module-5zhPoA2U.js";import{t as ce}from"./PageTransition-Dtlz07qc.js";import{n as le}from"./confetti-By5iY8uZ.js";var g=m(`minus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}]]),ue=m(`package`,[[`path`,{d:`M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z`,key:`1a0edw`}],[`path`,{d:`M12 22V12`,key:`d0xqtd`}],[`polyline`,{points:`3.29 7 12 12 20.71 7`,key:`ousv84`}],[`path`,{d:`m7.5 4.27 9 5.15`,key:`1c824w`}]]),_=m(`tag`,[[`path`,{d:`M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z`,key:`vktsd0`}],[`circle`,{cx:`7.5`,cy:`7.5`,r:`.5`,fill:`currentColor`,key:`kqv944`}]]),v=f(),y=h();function b(){let{foundBugs:f,addBug:m,resetProgress:h,getBugDifficulty:b,xp:x,getBugPoints:S,deductXP:C}=se(),{newAchievement:w,checkAchievements:T}=ie(),{showAnimation:de,animationData:E,triggerBugAnimation:D}=o(),{addLog:O,addRequest:k}=oe(),[A,j]=(0,v.useState)(1),[M,N]=(0,v.useState)(``),[P,F]=(0,v.useState)(null),[I,fe]=(0,v.useState)(5),[L,R]=(0,v.useState)(!1),[z,B]=(0,v.useState)(!1),[V,H]=(0,v.useState)({}),[pe,me]=(0,v.useState)({}),[U]=(0,v.useState)([{id:`neg_qty`,description:`Məhsul sayı mənfi ola bilir (-1)`,severity:`Critical`,priority:`High`},{id:`zero_qty`,description:`Məhsul sayı 0 ola bilir`,severity:`Major`,priority:`Medium`},{id:`float_qty`,description:`Məhsul sayı kəsr ola bilir (1.5)`,severity:`Major`,priority:`Medium`},{id:`price_calc`,description:`Endirim hesablanarkən qiymət artır`,severity:`Critical`,priority:`High`},{id:`img_broken`,description:`Məhsul şəkli yüklənməyib`,severity:`Minor`,priority:`Low`},{id:`del_btn`,description:`Silmə düyməsi işləmir`,severity:`Major`,priority:`Medium`},{id:`stock_limit`,description:`Stokda olandan çox məhsul seçmək olur`,severity:`Major`,priority:`Medium`},{id:`product_typo`,description:`Məhsul adında səhv: "iPhone" əvəzinə "iPone"`,severity:`Minor`,priority:`Low`},{id:`currency_symbol`,description:`Valyuta simvolu yanlışdır ($ əvəzinə ₼)`,severity:`Minor`,priority:`Low`},{id:`coupon_100`,description:`Kupon kodu "FREE100" 100% endirim verir`,severity:`Minor`,priority:`Low`},{id:`no_size`,description:`Ölçü seçimi yoxdur`,severity:`Minor`,priority:`Low`},{id:`no_color`,description:`Rəng seçimi yoxdur`,severity:`Minor`,priority:`Low`},{id:`img_no_alt`,description:`Şəkildə alt atributu yoxdur (accessibility)`,severity:`Minor`,priority:`Low`},{id:`price_alignment`,description:`Qiymət sağa deyil, sola yönəlib`,severity:`Minor`,priority:`Low`},{id:`btn_typo`,description:`Düymədə səhv: "rəsmiləşdir" əvəzinə "rəsmiləşdır"`,severity:`Minor`,priority:`Low`},{id:`total_font`,description:`Yekun məbləğ şrifti çox kiçikdir`,severity:`Minor`,priority:`Low`},{id:`qty_btn_size`,description:`Miqdar düymələri fərqli ölçüdədir`,severity:`Minor`,priority:`Low`},{id:`discount_color`,description:`Endirim mənfi olduğu halda yaşıl rəngdədir`,severity:`Minor`,priority:`Low`},{id:`checkout_disabled`,description:`Checkout düyməsi heç vaxt disabled olmur`,severity:`Major`,priority:`Medium`},{id:`stock_info`,description:`Stok məlumatı göstərilmir`,severity:`Major`,priority:`Medium`}]),[he,W]=(0,v.useState)(!1),[G,K]=(0,v.useState)(null),q=e=>{f.includes(e)||(K(e),W(!0))},J=e=>{let t=m(e);if(t.isNew){let n=U.find(t=>t.id===e);D({...t,bugName:n.description}),T({foundBugs:[...f,e],totalBugs:U.length,moduleBugs:{ecommerce:U},getBugDifficulty:b})}},ge=({severity:e,priority:t})=>{let n=U.find(e=>e.id===G),r=0;e===n.severity&&(r+=5),t===n.priority&&(r+=5);let i=S(b(G))+r;m(G),D({isNew:!0,points:i,bugName:n.description}),W(!1),K(null),T({foundBugs:[...f,G],totalBugs:U.length,moduleBugs:{ecommerce:U},getBugDifficulty:b})},_e=()=>{let e={},t=[];return A<0&&(t.push(`neg_qty`),e.quantity=`Məhsul sayı mənfi ola bilməz`),A===0&&(t.push(`zero_qty`),e.quantity=`Məhsul sayı 0 ola bilməz`),A%1!=0&&(t.push(`float_qty`),e.quantity=`Məhsul sayı tam ədəd olmalıdır`),A>I&&(t.push(`stock_limit`),e.quantity=`Stokda yalnız ${I} ədəd var`),t.push(`btn_typo`),t.push(`checkout_disabled`),H(e),{isValid:Object.keys(e).length===0,detectedBugs:t}},ve=()=>{let e=A-1;j(e),e===0&&J(`zero_qty`),e<0&&J(`neg_qty`)},ye=()=>{let e=A+1;j(e),e>I&&J(`stock_limit`)},be=e=>{let t=parseFloat(e.target.value);j(t),t%1!=0&&J(`float_qty`)},xe=()=>{J(`del_btn`)},Se=()=>{O(`info`,`Attempting to apply coupon: ${M}`),M.toUpperCase()===`FREE100`?(J(`coupon_100`),F({code:`FREE100`,discount:100}),O(`success`,`Coupon applied successfully`,{code:`FREE100`,discount:100})):M&&O(`warn`,`Invalid coupon code`,{code:M})},Ce=async()=>{let{isValid:e,detectedBugs:t}=_e();if(t.forEach(e=>{J(e),f.includes(e)}),!e){Object.values(V)[0],O(`warn`,`Checkout validation failed`,V);return}B(!0),O(`info`,`Starting checkout process...`,{items:A,total:Z}),await new Promise(e=>setTimeout(e,1500)),B(!1),k(`POST`,`https://api.shop.com/v1/checkout`,200,1500,{success:!0,orderId:`ORD-998877`}),O(`info`,`Checkout completed successfully`),I===I&&J(`stock_info`)},Y=2999,X=P?P.discount/100*Y*A:-50,Z=Y*A+X,Q=U,$=f.filter(e=>Q.find(t=>t.id===e));return(0,v.useEffect)(()=>{$.length===Q.length&&Q.length>0&&le()},[$.length,Q.length]),(0,y.jsxs)(ce,{className:`p-6 pt-12 pb-24 min-h-screen`,children:[(0,y.jsx)(n,{isOpen:L,onClose:()=>R(!1),spec:te.ecommerce}),(0,y.jsx)(ae,{children:de&&E&&(0,y.jsx)(r,{bugName:E.bugName,points:E.points,onComplete:()=>{}})}),w&&(0,y.jsx)(re,{achievement:w,onClose:()=>{}}),(0,y.jsxs)(`header`,{className:`mb-8`,children:[(0,y.jsxs)(p,{to:`/practice`,className:`inline-flex items-center text-slate-500 mb-4 hover:text-slate-800 transition-colors`,children:[(0,y.jsx)(e,{size:20,className:`mr-1`}),`Geri qayıt`]}),(0,y.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`h1`,{className:`text-3xl font-black text-slate-900 tracking-tight mb-2`,children:`Səbət`}),(0,y.jsxs)(`div`,{className:`flex items-center gap-2 text-slate-500 font-medium`,children:[(0,y.jsx)(c,{size:18}),(0,y.jsxs)(`p`,{children:[`Bu səhifədə `,U.length,` baq gizlənib.`]})]})]}),(0,y.jsx)(`button`,{onClick:()=>R(!0),className:`p-3 bg-indigo-100 text-indigo-600 rounded-xl hover:bg-indigo-200 transition-colors`,children:(0,y.jsx)(s,{size:24})})]})]}),(0,y.jsxs)(`div`,{className:`bg-white p-6 rounded-[2rem] shadow-xl shadow-orange-200/50 border border-slate-100 relative overflow-hidden mb-8`,children:[(0,y.jsx)(`div`,{className:`absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-orange-500 to-red-500`}),(0,y.jsxs)(`div`,{className:`flex gap-4 mb-6`,children:[(0,y.jsx)(`div`,{className:`w-24 h-24 bg-slate-100 rounded-xl flex items-center justify-center cursor-pointer`,onClick:()=>{q(`img_broken`),q(`img_no_alt`)},children:(0,y.jsx)(`span`,{className:`text-xs text-slate-400`,children:`Image Error`})}),(0,y.jsxs)(`div`,{className:`flex-1`,children:[(0,y.jsx)(`h3`,{className:`font-bold text-slate-900 cursor-pointer`,onClick:()=>q(`product_typo`),children:`iPone 15 Pro Max`}),(0,y.jsx)(`p`,{className:`text-slate-500 text-sm mb-2`,children:`Titanium Blue, 256GB`}),(0,y.jsxs)(`div`,{className:`flex gap-2 mb-2`,children:[(0,y.jsx)(`span`,{className:`text-xs text-slate-400 cursor-pointer hover:text-red-500`,onClick:()=>q(`no_size`),children:`Ölçü: ?`}),(0,y.jsx)(`span`,{className:`text-xs text-slate-400 cursor-pointer hover:text-red-500`,onClick:()=>q(`no_color`),children:`Rəng: ?`})]}),(0,y.jsxs)(`div`,{className:`flex items-center gap-2 cursor-pointer`,onClick:()=>q(`price_alignment`),children:[(0,y.jsxs)(`span`,{className:`font-bold text-lg cursor-pointer`,onClick:e=>{e.stopPropagation(),q(`currency_symbol`)},children:[`$`,Y]}),(0,y.jsxs)(`span`,{className:`text-sm text-red-500 line-through cursor-pointer`,onClick:e=>{e.stopPropagation(),q(`price_calc`)},children:[`$`,Y-500]})]})]})]}),(0,y.jsxs)(`div`,{className:`flex items-center justify-between bg-slate-50 p-4 rounded-xl mb-6`,children:[(0,y.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,y.jsx)(`button`,{onClick:()=>{ve(),q(`qty_btn_size`)},className:`w-10 h-8 bg-white rounded-full shadow-sm flex items-center justify-center text-slate-600 hover:bg-slate-100 transition-colors`,children:(0,y.jsx)(g,{size:16})}),(0,y.jsx)(`input`,{type:`number`,step:`0.1`,value:A,onChange:be,className:`font-bold w-16 text-center border-2 rounded-lg p-1 outline-none transition-colors ${V.quantity?`border-red-300`:`border-slate-200`}`}),(0,y.jsx)(`button`,{onClick:ye,className:`w-8 h-8 bg-white rounded-full shadow-sm flex items-center justify-center text-slate-600 hover:bg-slate-100 transition-colors`,children:(0,y.jsx)(u,{size:16})})]}),(0,y.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,y.jsxs)(`div`,{className:`flex items-center gap-2 cursor-pointer opacity-50`,onClick:()=>q(`stock_info`),children:[(0,y.jsx)(ue,{size:16,className:`text-slate-400`}),(0,y.jsx)(`span`,{className:`text-xs text-slate-400`,children:`Stok: ?`})]}),(0,y.jsx)(`button`,{className:`text-slate-400 hover:text-red-500 transition-colors`,onClick:xe,children:(0,y.jsx)(d,{size:20})})]})]}),V.quantity&&(0,y.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 text-red-600 text-sm bg-red-50 p-3 rounded-xl`,children:[(0,y.jsx)(t,{size:16}),(0,y.jsx)(`span`,{children:V.quantity})]}),(0,y.jsxs)(`div`,{className:`mb-6`,children:[(0,y.jsxs)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2`,children:[(0,y.jsx)(_,{size:16}),`Kupon Kodu`]}),(0,y.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-2 items-start sm:items-center`,children:[(0,y.jsx)(`input`,{type:`text`,placeholder:`Kupon kodu`,className:`flex-1 w-full p-3 border-2 border-slate-200 rounded-xl outline-none focus:border-orange-500 transition-colors`,value:M,onChange:e=>N(e.target.value)}),(0,y.jsxs)(`div`,{className:`relative group`,children:[(0,y.jsx)(ne,{size:16,className:`text-slate-400 cursor-pointer`}),(0,y.jsx)(`div`,{className:`absolute left-0 mt-1 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none`,children:`Kupon kodunu daxil edin (məsələn FREE100)`})]}),(0,y.jsx)(`button`,{onClick:Se,className:`w-full sm:w-auto px-4 py-2 bg-orange-100 text-orange-600 rounded-xl font-bold hover:bg-orange-200 transition-colors mt-2 sm:mt-0`,children:`Tətbiq et`})]}),P&&(0,y.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-green-600 text-sm`,children:[(0,y.jsx)(ee,{size:16}),(0,y.jsxs)(`span`,{children:[`Kupon tətbiq edildi: `,P.discount,`% endirim`]})]})]}),(0,y.jsxs)(`div`,{className:`border-t border-slate-100 pt-4 space-y-2`,children:[(0,y.jsxs)(`div`,{className:`flex justify-between text-slate-600`,children:[(0,y.jsxs)(`span`,{children:[`Məhsullar (`,A,`)`]}),(0,y.jsxs)(`span`,{children:[`$`,Y*A]})]}),(0,y.jsxs)(`div`,{className:`flex justify-between text-green-600 font-medium cursor-pointer`,onClick:()=>q(`discount_color`),children:[(0,y.jsx)(`span`,{children:`Endirim`}),(0,y.jsxs)(`span`,{children:[X>0?`-`:`+`,`$`,Math.abs(X)]})]}),(0,y.jsxs)(`div`,{className:`flex justify-between font-black text-xl text-slate-900 pt-2 cursor-pointer`,onClick:()=>q(`total_font`),children:[(0,y.jsx)(`span`,{className:`text-xs`,children:`Cəmi`}),(0,y.jsxs)(`span`,{className:`text-xs`,children:[`$`,Z]})]})]}),(0,y.jsx)(`button`,{onClick:Ce,disabled:z,className:`w-full mt-6 py-4 bg-orange-500 text-white rounded-xl font-bold shadow-lg shadow-orange-200 hover:bg-orange-600 transition-colors cursor-pointer disabled:opacity-50 flex items-center justify-center gap-2`,children:z?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l,{className:`animate-spin`,size:20}),(0,y.jsx)(`span`,{children:`Emal edilir...`})]}):`Sifarişi rəsmiləşdır`})]}),(0,y.jsx)(a,{bugs:U,foundBugs:f,onReset:h,xp:x,getBugPoints:S,getBugDifficulty:b,deductXP:C}),(0,y.jsx)(i,{isOpen:he,onClose:()=>W(!1),onSubmit:ge,bug:U.find(e=>e.id===G)})]})}export{b as default};