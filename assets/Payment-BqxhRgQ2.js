import{t as e}from"./arrow-left-CEuzoGoc.js";import{n as t,t as n}from"./user-FtnFPS9N.js";import{n as r,t as i}from"./loader-circle-Bbh2fwzJ.js";import{a,c as o,d as s,f as ee,i as te,l as ne,n as c,o as l,r as u,s as re,t as ie}from"./practiceSpecs-38QTgaUO.js";import{t as ae}from"./credit-card-C2ZQ1oBv.js";import{t as oe}from"./lock-CGsilq2t.js";import"./sparkles-Dqv2FD2G.js";import"./achievements-BHPXEYAx.js";import"./proxy-K3kZNlDc.js";import{_ as se,b as d,f,n as p,t as m}from"./index-BW8FEYQy.js";import{t as ce}from"./PageTransition-npdI8hIz.js";import{n as h,t as g}from"./useAchievements-C49npA7c.js";var _=d(),v=f();function y(){let{foundBugs:d,addBug:f,resetProgress:y,getBugDifficulty:b,xp:x,getBugPoints:S,deductXP:C}=h(),{newAchievement:w,checkAchievements:T}=g(),{showAnimation:le,animationData:E,triggerBugAnimation:D}=u(),{addLog:O,addRequest:ue}=m(),[k,A]=(0,_.useState)(``),[j,M]=(0,_.useState)(``),[N,P]=(0,_.useState)(``),[F,I]=(0,_.useState)(``),[L,R]=(0,_.useState)({show:!1,message:``}),[z,B]=(0,_.useState)(!1),[V,H]=(0,_.useState)(!1),[U,de]=(0,_.useState)({}),[W,fe]=(0,_.useState)({}),[G]=(0,_.useState)([{id:`card_len`,description:`Kart nÃ¶mrÉ™si 16 rÉ™qÉ™mdÉ™n Ã§ox qÉ™bul edir`,severity:`Major`,priority:`Medium`},{id:`card_char`,description:`Kart nÃ¶mrÉ™sinÉ™ hÉ™rf yazmaq olur`,severity:`Major`,priority:`Medium`},{id:`card_special`,description:`Kart nÃ¶mrÉ™sinÉ™ xÃ¼susi simvollar daxil olur`,severity:`Minor`,priority:`Low`},{id:`name_numbers`,description:`Ad sahÉ™sinÉ™ rÉ™qÉ™m yazmaq olur`,severity:`Minor`,priority:`Low`},{id:`name_short`,description:`Ad sahÉ™si 2 simvoldan az qÉ™bul edir`,severity:`Minor`,priority:`Low`},{id:`name_label`,description:`Ad sahÉ™sindÉ™ label sÉ™hvi: "Kart sahibi" É™vÉ™zinÉ™ "Kart sahbi"`,severity:`Minor`,priority:`Low`},{id:`expiry_past`,description:`KeÃ§miÅŸ tarix seÃ§mÉ™k mÃ¼mkÃ¼ndÃ¼r`,severity:`Critical`,priority:`High`},{id:`expiry_current`,description:`Cari ay seÃ§ilÉ™ bilir (artÄ±q bitib)`,severity:`Major`,priority:`Medium`},{id:`cvv_visible`,description:`CVV kodu gizli deyil (gÃ¶rÃ¼nÃ¼r)`,severity:`Critical`,priority:`High`},{id:`cvv_len`,description:`CVV 3 rÉ™qÉ™mdÉ™n Ã§ox qÉ™bul edir`,severity:`Major`,priority:`Medium`},{id:`cvv_letters`,description:`CVV sahÉ™sinÉ™ hÉ™rf yazmaq olur`,severity:`Major`,priority:`Medium`},{id:`btn_typo`,description:`DÃ¼ymÉ™dÉ™ hÉ™rf sÉ™hvi: "Ã–dÉ™niÅŸ" É™vÉ™zinÉ™ "Ã–dÉ™ni"`,severity:`Minor`,priority:`Low`},{id:`btn_double`,description:`DÃ¼ymÉ™yÉ™ 2 dÉ™fÉ™ klik Ã¶dÉ™niÅŸi tÉ™krarlayÄ±r`,severity:`Critical`,priority:`High`},{id:`total_wrong`,description:`Yekun mÉ™blÉ™ÄŸ sÉ™hv hesablanÄ±b (100 + 5 = 1005)`,severity:`Critical`,priority:`High`},{id:`amount_label`,description:`MÉ™blÉ™ÄŸ yazÄ±sÄ±nda rÉ™ng kontrastÄ± zÉ™ifdir`,severity:`Minor`,priority:`Low`},{id:`form_spacing`,description:`Form elementlÉ™ri arasÄ±nda boÅŸluq qeyri-bÉ™rabÉ™rdir`,severity:`Minor`,priority:`Low`},{id:`card_icon`,description:`Kart ikonasÄ± yanlÄ±ÅŸ rÉ™ngdÉ™dir (qÄ±rmÄ±zÄ± É™vÉ™zinÉ™ yaÅŸÄ±l)`,severity:`Minor`,priority:`Low`},{id:`border_color`,description:`Focus zamanÄ± border rÉ™ngi sÉ™hvdir`,severity:`Minor`,priority:`Low`},{id:`loading_state`,description:`Ã–dÉ™niÅŸ zamanÄ± yÃ¼klÉ™mÉ™ gÃ¶stÉ™ricisi yoxdur`,severity:`Major`,priority:`Medium`},{id:`success_msg`,description:`UÄŸurlu Ã¶dÉ™niÅŸ mesajÄ± gÃ¶stÉ™rilmir`,severity:`Major`,priority:`Medium`}]),[pe,K]=(0,_.useState)(!1),[q,J]=(0,_.useState)(null),Y=e=>{d.includes(e)||(J(e),K(!0))},X=e=>{let t=f(e);if(t.isNew){let n=G.find(t=>t.id===e);R({show:!0,message:n.description}),D({...t,bugName:n.description}),T({foundBugs:[...d,e],totalBugs:G.length,moduleBugs:{payment:G},getBugDifficulty:b})}},me=({severity:e,priority:t})=>{let n=G.find(e=>e.id===q),r=0;e===n.severity&&(r+=5),t===n.priority&&(r+=5);let i=S(b(q))+r;f(q),D({isNew:!0,points:i,bugName:n.description}),K(!1),J(null),r>0&&R({show:!0,message:`Æla! DÃ¼zgÃ¼n qiymÉ™tlÉ™ndirmÉ™ Ã¼Ã§Ã¼n +${r} XP bonus! ðŸŽ¯`}),T({foundBugs:[...d,q],totalBugs:G.length,moduleBugs:{payment:G},getBugDifficulty:b})},he=()=>{let e={},t=[];if(k?(k.length>16&&(t.push(`card_len`),e.cardNumber=`Kart nÃ¶mrÉ™si 16 rÉ™qÉ™mdÉ™n Ã§ox ola bilmÉ™z`),/[a-zA-Z]/.test(k)&&(t.push(`card_char`),e.cardNumber=`Kart nÃ¶mrÉ™si yalnÄ±z rÉ™qÉ™mlÉ™rdÉ™n ibarÉ™t olmalÄ±dÄ±r`),/[^0-9]/.test(k)&&(t.push(`card_special`),e.cardNumber=`Kart nÃ¶mrÉ™sindÉ™ xÃ¼susi simvollar ola bilmÉ™z`)):e.cardNumber=`Kart nÃ¶mrÉ™si tÉ™lÉ™b olunur`,j?(/[0-9]/.test(j)&&(t.push(`name_numbers`),e.cardName=`Ad sahÉ™sindÉ™ rÉ™qÉ™mlÉ™r ola bilmÉ™z`),j.length>0&&j.length<2&&(t.push(`name_short`),e.cardName=`Ad É™n azÄ± 2 simvol olmalÄ±dÄ±r`)):e.cardName=`Kart sahibinin adÄ± tÉ™lÉ™b olunur`,!N)e.expiry=`BitmÉ™ tarixi tÉ™lÉ™b olunur`;else{let n=new Date(N),r=new Date;n<r&&(t.push(`expiry_past`),e.expiry=`KeÃ§miÅŸ tarix seÃ§ilÉ™ bilmÉ™z`);let i=r.getMonth(),a=r.getFullYear(),o=n.getMonth();n.getFullYear()===a&&o===i&&(t.push(`expiry_current`),e.expiry=`Cari ay artÄ±q bitib, gÉ™lÉ™cÉ™k ay seÃ§in`)}return F?(F.length>3&&(t.push(`cvv_len`),e.cvv=`CVV 3 rÉ™qÉ™mdÉ™n Ã§ox ola bilmÉ™z`),/[a-zA-Z]/.test(F)&&(t.push(`cvv_letters`),e.cvv=`CVV yalnÄ±z rÉ™qÉ™mlÉ™rdÉ™n ibarÉ™t olmalÄ±dÄ±r`)):e.cvv=`CVV kodu tÉ™lÉ™b olunur`,t.push(`btn_typo`),t.push(`total_wrong`),t.push(`loading_state`),t.push(`success_msg`),de(e),{isValid:Object.keys(e).length===0,detectedBugs:t}},ge=async()=>{if(V){X(`btn_double`);return}let{isValid:e,detectedBugs:t}=he(),n=!1;if(t.forEach(e=>{X(e),d.includes(e)||(n=!0)}),!e){let e=Object.values(U)[0];n||R({show:!0,message:e});return}H(!0),O(`info`,`Starting payment processing...`,{amount:100,currency:`AZN`}),await new Promise(e=>setTimeout(e,1500)),H(!1),ue(`POST`,`https://api.bank.com/v1/payments`,500,1500,{error:`Internal Server Error`}),O(`error`,`Payment failed: Server responded with status 500`),n||console.log(`Payment processed (but no message shown to user)`)},Z=e=>{fe({...W,[e]:!0})},Q=G,$=d.filter(e=>Q.find(t=>t.id===e));return(0,_.useEffect)(()=>{$.length===Q.length&&Q.length>0&&te()},[$.length,Q.length]),(0,v.jsxs)(ce,{className:`p-6 pt-12 pb-24 min-h-screen`,children:[(0,v.jsx)(ne,{show:L.show,message:L.message,onClose:()=>R({show:!1,message:``})}),(0,v.jsx)(re,{isOpen:z,onClose:()=>B(!1),spec:ie.payment}),(0,v.jsx)(p,{children:le&&E&&(0,v.jsx)(l,{bugName:E.bugName,points:E.points,onComplete:()=>{}})}),w&&(0,v.jsx)(a,{achievement:w,onClose:()=>{}}),(0,v.jsxs)(`header`,{className:`mb-8`,children:[(0,v.jsxs)(se,{to:`/practice`,className:`inline-flex items-center text-slate-500 mb-4 hover:text-slate-800 transition-colors`,children:[(0,v.jsx)(e,{size:20,className:`mr-1`}),`Geri qayÄ±t`]}),(0,v.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`h1`,{className:`text-3xl font-black text-slate-900 tracking-tight mb-2`,children:`Ã–dÉ™niÅŸ SÉ™hifÉ™si`}),(0,v.jsxs)(`div`,{className:`flex items-center gap-2 text-slate-500 font-medium`,children:[(0,v.jsx)(s,{size:18}),(0,v.jsxs)(`p`,{children:[`Bu sÉ™hifÉ™dÉ™ `,G.length,` baq gizlÉ™nib.`]})]})]}),(0,v.jsx)(`button`,{onClick:()=>B(!0),className:`p-3 bg-indigo-100 text-indigo-600 rounded-xl hover:bg-indigo-200 transition-colors`,children:(0,v.jsx)(ee,{size:24})})]})]}),(0,v.jsxs)(`div`,{className:`bg-white p-8 rounded-[2rem] shadow-xl shadow-purple-200/50 border border-slate-100 relative overflow-hidden mb-8`,children:[(0,v.jsx)(`div`,{className:`absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-purple-500 to-pink-500`}),(0,v.jsxs)(`form`,{onSubmit:e=>{e.preventDefault(),ge()},className:`space-y-6`,children:[(0,v.jsxs)(`div`,{className:`mb-8`,children:[(0,v.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2`,children:`Kart NÃ¶mrÉ™si`}),(0,v.jsxs)(`div`,{className:`relative`,children:[(0,v.jsx)(ae,{className:`absolute left-3 top-3.5 text-green-400 cursor-pointer`,size:18,onClick:()=>Y(`card_icon`,`Kart ikonasÄ± yanlÄ±ÅŸ rÉ™ngdÉ™dir (qÄ±rmÄ±zÄ± É™vÉ™zinÉ™ yaÅŸÄ±l)`)}),(0,v.jsx)(`input`,{type:`text`,placeholder:`0000 0000 0000 0000`,className:`w-full pl-10 p-3 border-2 rounded-xl outline-none transition-colors ${W.cardNumber&&U.cardNumber?`border-red-300 focus:border-red-500`:`border-slate-200 focus:border-green-500`}`,value:k,onChange:e=>A(e.target.value),onBlur:()=>Z(`cardNumber`),onClick:()=>Y(`border_color`,`Focus zamanÄ± border rÉ™ngi sÉ™hvdir`)}),W.cardNumber&&U.cardNumber&&(0,v.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,v.jsx)(r,{size:16}),(0,v.jsx)(`span`,{children:U.cardNumber})]})]})]}),(0,v.jsxs)(`div`,{className:`mb-3`,children:[(0,v.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2 cursor-pointer`,onClick:()=>Y(`name_label`,`Ad sahÉ™sindÉ™ label sÉ™hvi: "Kart sahibi" É™vÉ™zinÉ™ "Kart sahbi"`),children:`Kart sahbi`}),(0,v.jsxs)(`div`,{className:`relative`,children:[(0,v.jsx)(n,{className:`absolute left-3 top-3.5 text-slate-400`,size:18}),(0,v.jsx)(`input`,{type:`text`,placeholder:`Ad Soyad`,className:`w-full pl-10 p-3 border-2 rounded-xl outline-none transition-colors ${W.cardName&&U.cardName?`border-red-300 focus:border-red-500`:`border-slate-200 focus:border-purple-500`}`,value:j,onChange:e=>M(e.target.value),onBlur:()=>Z(`cardName`)}),W.cardName&&U.cardName&&(0,v.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,v.jsx)(r,{size:16}),(0,v.jsx)(`span`,{children:U.cardName})]})]})]}),(0,v.jsxs)(`div`,{className:`flex gap-4 mb-10 cursor-pointer`,onClick:()=>Y(`form_spacing`,`Form elementlÉ™ri arasÄ±nda boÅŸluq qeyri-bÉ™rabÉ™rdir`),children:[(0,v.jsxs)(`div`,{className:`flex-1`,children:[(0,v.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2`,children:`BitmÉ™ Tarixi`}),(0,v.jsxs)(`div`,{className:`relative`,children:[(0,v.jsx)(t,{className:`absolute left-3 top-3.5 text-slate-400`,size:18}),(0,v.jsx)(`input`,{type:`month`,className:`w-full pl-10 p-3 border-2 rounded-xl outline-none transition-colors ${W.expiry&&U.expiry?`border-red-300 focus:border-red-500`:`border-slate-200 focus:border-purple-500`}`,value:N,onChange:e=>P(e.target.value),onBlur:()=>Z(`expiry`)}),W.expiry&&U.expiry&&(0,v.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,v.jsx)(r,{size:16}),(0,v.jsx)(`span`,{children:U.expiry})]})]})]}),(0,v.jsxs)(`div`,{className:`flex-1`,children:[(0,v.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2`,children:`CVV`}),(0,v.jsxs)(`div`,{className:`relative`,children:[(0,v.jsx)(oe,{className:`absolute left-3 top-3.5 text-slate-400`,size:18}),(0,v.jsx)(`input`,{type:`text`,placeholder:`123`,className:`w-full pl-10 p-3 border-2 rounded-xl outline-none transition-colors ${W.cvv&&U.cvv?`border-red-300 focus:border-red-500`:`border-slate-200 focus:border-purple-500`}`,value:F,onChange:e=>{I(e.target.value),e.target.value.length>0&&!d.includes(`cvv_visible`)&&f(`cvv_visible`)&&R({show:!0,message:`CVV kodu gizli deyil (gÃ¶rÃ¼nÃ¼r)`})},onBlur:()=>Z(`cvv`)}),W.cvv&&U.cvv&&(0,v.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,v.jsx)(r,{size:16}),(0,v.jsx)(`span`,{children:U.cvv})]})]})]})]}),(0,v.jsxs)(`div`,{className:`bg-slate-50 p-4 rounded-xl space-y-2`,children:[(0,v.jsxs)(`div`,{className:`flex justify-between text-sm text-slate-600`,children:[(0,v.jsx)(`span`,{children:`MÉ™blÉ™ÄŸ:`}),(0,v.jsx)(`span`,{children:`100 AZN`})]}),(0,v.jsxs)(`div`,{className:`flex justify-between text-sm text-slate-600`,children:[(0,v.jsx)(`span`,{children:`Komissiya:`}),(0,v.jsx)(`span`,{children:`5 AZN`})]}),(0,v.jsxs)(`div`,{className:`border-t border-slate-200 pt-2 flex justify-between font-bold text-slate-900`,children:[(0,v.jsx)(`span`,{className:`text-slate-300 cursor-pointer`,onClick:()=>Y(`amount_label`,`MÉ™blÉ™ÄŸ yazÄ±sÄ±nda rÉ™ng kontrastÄ± zÉ™ifdir`),children:`CÉ™mi:`}),(0,v.jsx)(`span`,{className:`text-red-500`,children:`1005 AZN`})]})]}),(0,v.jsx)(`button`,{type:`submit`,disabled:V,className:`w-full py-4 bg-purple-600 text-white rounded-xl font-bold shadow-lg shadow-purple-200 hover:bg-purple-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2`,children:V?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(i,{className:`animate-spin`,size:20}),(0,v.jsx)(`span`,{children:`Emal edilir...`})]}):`Ã–dÉ™ni et`})]})]}),(0,v.jsx)(o,{bugs:G,foundBugs:d,onReset:y,xp:x,getBugPoints:S,getBugDifficulty:b,deductXP:C}),(0,v.jsx)(c,{isOpen:pe,onClose:()=>K(!1),onSubmit:me,bug:G.find(e=>e.id===q)})]})}export{y as default};