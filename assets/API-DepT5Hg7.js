import{t as e}from"./useTranslation-CZ9xHxJN.js";import{t}from"./chevron-left-Ba7fEzgB.js";import{t as n}from"./circle-check-big-B22zqBBM.js";import{n as r,t as i}from"./globe-BHFQ7-eR.js";import{t as a}from"./eye-off-BsZM3mTq.js";import{n as o,t as s}from"./play-DKnefuNH.js";import{t as ee}from"./lock-CTSjm3IG.js";import{t as c}from"./plus-CL8yHCAR.js";import{t as l}from"./trash-2-EorY0dL0.js";import{E as u,S as d,j as f,n as p,o as m,s as h,y as g}from"./index-L6i9Tykn.js";import{t as te}from"./useGameProgress-DJOXUuUo.js";import{t as _}from"./confetti.module-BcdpeI79.js";import{t as v}from"./PageTransition-BxzcKw6d.js";var y=g(`panels-top-left`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M3 9h18`,key:`1pudct`}],[`path`,{d:`M9 21V9`,key:`1oto5p`}]]),b=g(`server`,[[`rect`,{width:`20`,height:`8`,x:`2`,y:`2`,rx:`2`,ry:`2`,key:`ngkwjq`}],[`rect`,{width:`20`,height:`8`,x:`2`,y:`14`,rx:`2`,ry:`2`,key:`iecqi9`}],[`line`,{x1:`6`,x2:`6.01`,y1:`6`,y2:`6`,key:`16zg32`}],[`line`,{x1:`6`,x2:`6.01`,y1:`18`,y2:`18`,key:`nzw8ys`}]]),ne=g(`zap`,[[`path`,{d:`M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z`,key:`1xq2db`}]]),x=f(),S=d(),C=[{id:1,name:`Ali`,email:`ali@mail.az`,role:`admin`},{id:2,name:`Vali`,email:`vali@mail.az`,role:`user`}];function w(){let{t:d}=e(),{addXP:f,xp:g}=te(),{checkAchievements:w}=p(),[T,E]=(0,x.useState)(1),[D,O]=(0,x.useState)(`request`),[re,ie]=(0,x.useState)(null),[k,A]=(0,x.useState)(C),[j,M]=(0,x.useState)(`GET`),[N,P]=(0,x.useState)(`/users`),[F,I]=(0,x.useState)([{key:``,value:``}]),[L,R]=(0,x.useState)(``),[z,B]=(0,x.useState)(`form`),[V,H]=(0,x.useState)(!1),[U,W]=(0,x.useState)({name:``,email:``}),[G,K]=(0,x.useState)(null),[q,J]=(0,x.useState)(!1),[ae,Y]=(0,x.useState)([]),[X,oe]=(0,x.useState)(!1),[Z,Q]=(0,x.useState)(()=>{let e=localStorage.getItem(`qa_api_completed`);return e?JSON.parse(e):[]});(0,x.useEffect)(()=>{localStorage.setItem(`qa_api_completed`,JSON.stringify(Z))},[Z]),(0,x.useEffect)(()=>{z===`form`&&R(JSON.stringify(U,null,2))},[U,z]);let $={1:{id:1,task:d(`api.levels.level1_task`),hint:d(`api.levels.level1_hint`)||`Use GET method to retrieve data.`,answer:{method:`GET`,url:`/users`,headers:[],body:``},check:(e,t)=>e.status===200&&t.method===`GET`&&t.url===`/users`},2:{id:2,task:d(`api.levels.level2_task`),hint:d(`api.levels.level2_hint`)||`Try to access a resource ID that likely doesn't exist.`,answer:{method:`GET`,url:`/users/999`,headers:[],body:``},check:(e,t)=>e.status===404},3:{id:3,task:d(`api.levels.level3_task`),hint:d(`api.levels.level3_hint`)||`POST method requires a body with user details.`,answer:{method:`POST`,url:`/users`,headers:[],body:`{
  "name": "Test",
  "email": "test@mail.az"
}`},check:(e,t)=>e.status===201&&t.method===`POST`},4:{id:4,task:d(`api.levels.level4_task`),hint:d(`api.levels.level4_hint`)||`Protected routes need an Authorization header.`,answer:{method:`GET`,url:`/admin`,headers:[{key:`Authorization`,value:`Bearer admin-token`}],body:``},check:(e,t)=>e.status===200&&t.url===`/admin`},5:{id:5,task:d(`api.levels.level5_task`),hint:d(`api.levels.level5_hint`)||`PUT method updates an existing resource by ID.`,answer:{method:`PUT`,url:`/users/1`,headers:[],body:`{
  "name": "Updated Name"
}`},check:(e,t)=>e.status===200&&t.method===`PUT`}}[T],se=[{method:`GET`,url:`/users`,label:`Get All Users`},{method:`GET`,url:`/users/1`,label:`Get User by ID`},{method:`POST`,url:`/users`,label:`Create User`},{method:`PUT`,url:`/users/1`,label:`Update User`},{method:`DELETE`,url:`/users/1`,label:`Delete User`},{method:`GET`,url:`/admin`,label:`Admin Panel (Protected)`}],ce=e=>{M(e.method),P(e.url),(e.method===`POST`||e.method===`PUT`)&&B(`form`),e.url===`/admin`&&H(!0)};return(0,S.jsx)(v,{className:`min-h-screen bg-slate-900 text-slate-300 p-4 pt-20 pb-24`,children:(0,S.jsxs)(`div`,{className:`max-w-5xl mx-auto`,children:[(0,S.jsxs)(`div`,{className:`flex items-start justify-between mb-6`,children:[(0,S.jsxs)(`div`,{className:`flex items-start gap-4`,children:[(0,S.jsx)(u,{to:`/practice`,className:`mt-1 p-2 bg-slate-800 rounded-xl hover:bg-slate-700 transition-colors shrink-0 border border-slate-700`,children:(0,S.jsx)(t,{className:`text-white`,size:20})}),(0,S.jsxs)(`div`,{children:[(0,S.jsxs)(`h1`,{className:`text-2xl sm:text-3xl font-bold text-white flex items-center gap-3 mb-2`,children:[(0,S.jsx)(`div`,{className:`p-2 bg-sky-500/20 rounded-lg shrink-0`,children:(0,S.jsx)(i,{size:24,className:`text-sky-500`})}),d(`api.title`)]}),(0,S.jsx)(`p`,{className:`text-slate-400 text-sm sm:text-base`,children:d(`api.description`)})]})]}),(0,S.jsx)(`button`,{onClick:()=>{window.confirm(d(`common.reset_confirm`)||`Are you sure you want to reset progress?`)&&(Q([]),E(1),A(C),Y([]))},className:`p-2 text-slate-500 hover:text-red-400 transition-colors`,title:`Reset Progress`,children:(0,S.jsx)(l,{size:20})})]}),(0,S.jsx)(`div`,{className:`flex gap-3 mb-6 overflow-x-auto pb-2 justify-start no-scrollbar px-1`,children:[1,2,3,4,5].map(e=>(0,S.jsxs)(`button`,{onClick:()=>(Z.includes(e-1)||e===1)&&E(e),disabled:e>1&&!Z.includes(e-1),className:`flex-1 min-w-[100px] p-3 rounded-xl border-2 flex flex-col items-center gap-1 transition-all ${T===e?`border-sky-500 bg-sky-500/10 text-white`:e>1&&!Z.includes(e-1)?`border-slate-800 opacity-50`:`border-slate-700 bg-slate-800`}`,children:[(0,S.jsxs)(`span`,{className:`text-xs font-bold uppercase`,children:[`Level `,e]}),e>1&&!Z.includes(e-1)?(0,S.jsx)(ee,{size:14}):Z.includes(e)?(0,S.jsx)(n,{size:14,className:`text-green-500`}):(0,S.jsx)(i,{size:14})]},e))}),(0,S.jsxs)(`div`,{className:`grid grid-cols-1 2xl:grid-cols-3 gap-6`,children:[(0,S.jsxs)(`div`,{className:`2xl:col-span-1 space-y-6`,children:[(0,S.jsxs)(`div`,{className:`bg-slate-800 rounded-2xl p-5 border border-slate-700 shadow-lg`,children:[(0,S.jsxs)(`div`,{className:`flex items-center gap-2 mb-3`,children:[(0,S.jsx)(b,{className:`text-sky-400`,size:20}),(0,S.jsx)(`h2`,{className:`text-lg font-bold text-white`,children:d(`api.task`)})]}),(0,S.jsx)(`p`,{className:`text-slate-200 font-medium mb-4 leading-relaxed`,children:$.task}),(0,S.jsxs)(`div`,{className:`bg-slate-900/50 p-3 rounded-lg border border-slate-700/50 text-sm text-slate-400 mb-4`,children:[(0,S.jsx)(`p`,{className:`font-bold text-slate-500 text-xs uppercase mb-1`,children:d(`api.hint`)}),$.hint]}),(0,S.jsxs)(`div`,{className:`flex gap-2`,children:[(0,S.jsx)(`button`,{onClick:()=>{M(`GET`),P(``),I([]),R(``),K(null)},className:`flex-1 py-2.5 rounded-xl bg-slate-700 hover:bg-slate-600 text-white font-bold text-xs`,children:d(`common.reset`,`Sıfırla`)}),(0,S.jsxs)(`button`,{onClick:()=>{oe(!0);let e=$.answer;M(e.method),P(e.url),I(e.headers.length>0?e.headers:[{key:``,value:``}]),e.body&&(R(e.body),B(`json`)),e.headers.length>0&&H(!0),O(`request`)},disabled:X,className:`flex-[2] py-2.5 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all ${X?`bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 cursor-default`:`bg-sky-600/20 hover:bg-sky-600/30 text-sky-300 border border-sky-500/30`}`,children:[(0,S.jsx)(o,{size:16}),X?d(`common.solution_loaded`,`Göstərilib`):d(`common.answer`,`Cavabı Göstər`)]})]}),X&&(0,S.jsx)(`div`,{className:`mt-3 text-xs text-amber-500 text-center font-bold bg-amber-500/10 py-2 rounded-lg border border-amber-500/20`,children:d(`api.noXpForAnswer`,`Cavaba baxdığınız üçün XP verilməyəcək!`)})]}),(0,S.jsxs)(`div`,{className:`bg-slate-800 rounded-2xl p-5 border border-slate-700 shadow-lg`,children:[(0,S.jsxs)(`h3`,{className:`text-xs font-bold text-slate-500 uppercase mb-3 flex items-center gap-2`,children:[(0,S.jsx)(ne,{size:14}),` Quick Routes`]}),(0,S.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:se.map((e,t)=>(0,S.jsxs)(`button`,{onClick:()=>ce(e),className:`text-xs bg-slate-900 hover:bg-slate-700 border border-slate-700 px-3 py-2 rounded-lg text-slate-300 transition-colors text-left`,children:[(0,S.jsx)(`span`,{className:`font-bold mr-2 ${e.method===`GET`?`text-green-400`:e.method===`POST`?`text-yellow-400`:e.method===`DELETE`?`text-red-400`:`text-blue-400`}`,children:e.method}),e.url]},t))})]})]}),(0,S.jsxs)(`div`,{className:`2xl:col-span-2 bg-slate-800 rounded-2xl border border-slate-700 shadow-xl overflow-hidden flex flex-col`,children:[(0,S.jsx)(`div`,{className:`p-4 border-b border-slate-700 bg-slate-800/80 backdrop-blur-sm`,children:(0,S.jsxs)(`div`,{className:`flex flex-col xl:flex-row gap-3`,children:[(0,S.jsxs)(`div`,{className:`flex-1 flex gap-2`,children:[(0,S.jsxs)(`select`,{value:j,onChange:e=>M(e.target.value),className:`bg-slate-900 text-white font-bold rounded-xl px-4 py-3 border border-slate-700 outline-none focus:border-sky-500`,children:[(0,S.jsx)(`option`,{children:`GET`}),(0,S.jsx)(`option`,{children:`POST`}),(0,S.jsx)(`option`,{children:`PUT`}),(0,S.jsx)(`option`,{children:`DELETE`})]}),(0,S.jsxs)(`div`,{className:`flex-1 relative`,children:[(0,S.jsx)(`span`,{className:`hidden md:block absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 font-mono text-sm select-none`,children:`https://api.qa`}),(0,S.jsx)(`input`,{type:`text`,value:N,onChange:e=>P(e.target.value),placeholder:`/users`,className:`w-full bg-slate-900 text-white rounded-xl pl-4 md:pl-32 pr-4 py-3 border border-slate-700 outline-none focus:border-sky-500 font-mono`})]})]}),(0,S.jsxs)(`button`,{onClick:async()=>{J(!0),K(null),O(`response`),await new Promise(e=>setTimeout(e,600));let e=200,t=null,n=`OK`;if(N===`/users`&&j===`GET`)e=200,t=k;else if(N.match(/^\/users\/\d+$/)&&j===`GET`){let r=parseInt(N.split(`/`).pop()),i=k.find(e=>e.id===r);i?(e=200,t=i):(e=404,n=`Not Found`,t={error:`User not found`})}else if(N===`/users`&&j===`POST`)try{let r=JSON.parse(L);if(r.name&&r.email){let i={id:k.length+1,...r,role:`user`};A(e=>[...e,i]),e=201,n=`Created`,t=i}else e=400,n=`Bad Request`,t={error:`Validation Error`}}catch{e=400,n=`Bad Request`,t={error:`Invalid JSON`}}else if(N.match(/^\/users\/\d+$/)&&j===`PUT`){let n=parseInt(N.split(`/`).pop()),r=k.findIndex(e=>e.id===n);if(r!==-1)try{let n=JSON.parse(L),i={...k[r],...n};A(e=>{let t=[...e];return t[r]=i,t}),e=200,t=i}catch{e=400,t={error:`Invalid JSON`}}else e=404,t={error:`User not found`}}else N===`/admin`?F.find(e=>e.key.toLowerCase()===`authorization`)?.value===`Bearer admin-token`?(e=200,t={message:`Welcome Admin!`}):(e=401,n=`Unauthorized`,t={error:`Missing Token`}):(e=404,n=`Not Found`,t={error:`Endpoint does not exist`});let r={status:e,statusText:n,data:t,time:Math.floor(Math.random()*50)+20};if(K(r),Y(t=>[{method:j,url:N,status:e,time:new Date().toLocaleTimeString()},...t].slice(0,10)),J(!1),$.check(r,{method:j,url:N,headers:F,body:L})&&!Z.includes(T)){let e=[...Z,T];Q(e),X?Y(e=>[{method:`SYSTEM`,url:`XP Denied (Answer Viewed)`,status:0,time:new Date().toLocaleTimeString()},...e]):(f(200),w({xp:g+200,completedLevels:{api:e},addXP:f,foundBugs:[],moduleBugs:{},getBugDifficulty:()=>`medium`}),_({particleCount:100,spread:70,origin:{y:.6}}))}},disabled:q,className:`bg-sky-600 hover:bg-sky-500 text-white font-bold rounded-xl px-6 py-3 flex items-center justify-center gap-2 transition-all shadow-lg shadow-sky-500/20 active:scale-95 w-full xl:w-auto shrink-0`,children:[q?(0,S.jsx)(`div`,{className:`animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent`}):(0,S.jsx)(s,{size:18,fill:`currentColor`}),(0,S.jsx)(`span`,{className:`xl:hidden 2xl:inline`,children:d(`api.send`,`Sorğu Göndər`)}),(0,S.jsx)(`span`,{className:`hidden xl:inline 2xl:hidden`,children:`Send`})]})]})}),(0,S.jsx)(`div`,{className:`flex border-b border-slate-700 bg-slate-900/50`,children:[`request`,`response`].map(e=>(0,S.jsxs)(`button`,{onClick:()=>O(e),className:`flex-1 py-3 text-sm font-bold relative ${D===e?`text-sky-400`:`text-slate-500`}`,children:[e===`request`?`Request Body & Headers`:`Response`,D===e&&(0,S.jsx)(m.div,{layoutId:`tab`,className:`absolute bottom-0 left-0 right-0 h-0.5 bg-sky-500`})]},e))}),(0,S.jsx)(`div`,{className:`p-5 min-h-[350px] bg-slate-900/30`,children:(0,S.jsxs)(h,{mode:`wait`,children:[D===`request`&&(0,S.jsxs)(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`space-y-6`,children:[(0,S.jsxs)(`div`,{children:[(0,S.jsxs)(`button`,{onClick:()=>H(!V),className:`flex items-center gap-2 text-xs font-bold text-slate-500 hover:text-slate-300 mb-3`,children:[V?(0,S.jsx)(a,{size:14}):(0,S.jsx)(o,{size:14}),V?`Hide Headers`:`Show Headers (Advanced)`]}),(0,S.jsx)(h,{children:V&&(0,S.jsxs)(m.div,{initial:{height:0,opacity:0},animate:{height:`auto`,opacity:1},exit:{height:0,opacity:0},className:`overflow-hidden space-y-2`,children:[F.map((e,t)=>(0,S.jsxs)(`div`,{className:`flex gap-2`,children:[(0,S.jsx)(`input`,{placeholder:`Key`,value:e.key,onChange:e=>{let n=[...F];n[t].key=e.target.value,I(n)},className:`flex-1 bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-sm`}),(0,S.jsx)(`input`,{placeholder:`Value`,value:e.value,onChange:e=>{let n=[...F];n[t].value=e.target.value,I(n)},className:`flex-1 bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-sm`}),t===F.length-1&&(0,S.jsx)(`button`,{onClick:()=>I([...F,{key:``,value:``}]),className:`p-2 text-sky-400`,children:(0,S.jsx)(c,{size:16})})]},t)),F.length===0&&(0,S.jsxs)(`button`,{onClick:()=>I([{key:``,value:``}]),className:`text-xs text-sky-400 flex items-center gap-1`,children:[(0,S.jsx)(c,{size:12}),` Add Header`]})]})})]}),j===`POST`||j===`PUT`?(0,S.jsxs)(`div`,{children:[(0,S.jsxs)(`div`,{className:`flex justify-between items-center mb-3`,children:[(0,S.jsxs)(`h3`,{className:`text-xs font-bold text-slate-400 uppercase flex items-center gap-2`,children:[(0,S.jsx)(r,{size:14}),` Body`]}),(0,S.jsxs)(`div`,{className:`flex bg-slate-900 rounded-lg p-1 border border-slate-700`,children:[(0,S.jsx)(`button`,{onClick:()=>B(`form`),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-colors ${z===`form`?`bg-slate-700 text-white`:`text-slate-500`}`,children:`Form`}),(0,S.jsx)(`button`,{onClick:()=>B(`json`),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-colors ${z===`json`?`bg-slate-700 text-white`:`text-slate-500`}`,children:`JSON`})]})]}),z===`form`?(0,S.jsxs)(`div`,{className:`space-y-3 bg-slate-900/50 p-4 rounded-xl border border-slate-700/50`,children:[(0,S.jsxs)(`div`,{children:[(0,S.jsx)(`label`,{className:`text-xs text-slate-500 mb-1 block`,children:`Name`}),(0,S.jsx)(`input`,{value:U.name,onChange:e=>W({...U,name:e.target.value}),className:`w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white focus:border-sky-500 outline-none`,placeholder:`John Doe`})]}),(0,S.jsxs)(`div`,{children:[(0,S.jsx)(`label`,{className:`text-xs text-slate-500 mb-1 block`,children:`Email`}),(0,S.jsx)(`input`,{value:U.email,onChange:e=>W({...U,email:e.target.value}),className:`w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white focus:border-sky-500 outline-none`,placeholder:`john@example.com`})]})]}):(0,S.jsx)(`textarea`,{value:L,onChange:e=>R(e.target.value),className:`w-full h-40 bg-slate-900 border border-slate-700 rounded-xl p-4 font-mono text-sm text-emerald-400 focus:border-sky-500 outline-none resize-none`,spellCheck:`false`})]}):(0,S.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-10 text-slate-600 border-2 border-dashed border-slate-800 rounded-xl`,children:[(0,S.jsx)(r,{size:24,className:`mb-2 opacity-50`}),(0,S.jsx)(`p`,{className:`text-xs font-medium`,children:d(`api.body_not_allowed`,{method:j})})]})]},`req`),D===`response`&&(0,S.jsx)(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`h-full`,children:G?(0,S.jsxs)(`div`,{className:`bg-slate-950 rounded-xl border border-slate-800 overflow-hidden`,children:[(0,S.jsxs)(`div`,{className:`px-4 py-3 border-b border-slate-800 flex justify-between items-center ${G.status<300?`bg-green-900/10`:`bg-red-900/10`}`,children:[(0,S.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,S.jsx)(`span`,{className:`text-lg font-black ${G.status<300?`text-green-400`:`text-red-400`}`,children:G.status}),(0,S.jsx)(`span`,{className:`text-xs font-bold text-slate-500 uppercase tracking-wider`,children:G.statusText})]}),(0,S.jsxs)(`span`,{className:`text-xs font-mono text-slate-600`,children:[G.time,`ms`]})]}),(0,S.jsx)(`div`,{className:`p-4 overflow-x-auto`,children:(0,S.jsx)(`pre`,{className:`font-mono text-xs sm:text-sm text-slate-300`,children:JSON.stringify(G.data,null,2)})})]}):(0,S.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-full py-12 text-slate-600`,children:[(0,S.jsx)(y,{size:48,className:`mb-4 opacity-20`}),(0,S.jsx)(`p`,{className:`text-sm`,children:`Send a request to see the response`})]})},`res`)]})})]})]})]})})}export{w as default};