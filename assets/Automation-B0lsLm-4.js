import{t as e}from"./useTranslation-BorRrBYq.js";import{t}from"./chevron-left-BGf1AM1g.js";import{t as n}from"./circle-alert-nLalZV21.js";import{t as r}from"./circle-check-big-DeljryxS.js";import{n as i,t as a}from"./globe-Bp12NfzE.js";import{n as o,t as s}from"./play-OUmng95C.js";import{t as c}from"./loader-circle-DNJPM3rd.js";import{t as l}from"./lock-open-C-OB2qhU.js";import{t as u}from"./lock-gSFCTHu0.js";import{t as d}from"./rotate-ccw-CWftH4U0.js";import{t as f}from"./trash-2-WC3f2hOh.js";import{a as p,b as m,d as h,g,n as _,p as v,w as y}from"./index-BmsDXusB.js";import{t as b}from"./useGameProgress-B4aRAw4f.js";import{t as x}from"./confetti.module-DC3TM9F_.js";import{t as S}from"./PageTransition-DErXEILC.js";var C=v(`mouse-pointer-2`,[[`path`,{d:`M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z`,key:`edeuup`}]]),w=y(),T=g();function E(){let{t:g}=e(),{addXP:v,xp:y}=b(),{checkAchievements:E}=_(),[D,O]=(0,w.useState)(1),[k,A]=(0,w.useState)({}),[j,M]=(0,w.useState)(``),[N,P]=(0,w.useState)(!1),[F,I]=(0,w.useState)(!1),[L,R]=(0,w.useState)(`idle`),[z,B]=(0,w.useState)([]),[V,H]=(0,w.useState)(`initial`),[U,W]=(0,w.useState)(()=>{let e=localStorage.getItem(`qa_automation_completed`);return e?JSON.parse(e):[]});(0,w.useEffect)(()=>{localStorage.setItem(`qa_automation_completed`,JSON.stringify(U))},[U]);let G={1:{title:g(`automation.levels.level1`),desc:g(`automation.levels.level1_desc`),task:`Login düyməsini tapmaq üçün düzgün lokatoru (By.id) və gözləməni (WebDriverWait) əlavə edin.`,initialCode:`// Test Login
@Test
public void testLogin() {
    WebDriver driver = new ChromeDriver();
    driver.get("https://app.com/login");
    
    // TODO: Fix Locator & Add Wait
    driver.findElement(By.xpath("//div[@class='btn']")).click();
}`,answerCode:`// Test Login
@Test
public void testLogin() {
    WebDriver driver = new ChromeDriver();
    driver.get("https://app.com/login");
    
    // Fixed Locator & Added Wait
    WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));
    wait.until(ExpectedConditions.elementToBeClickable(By.id("login-btn"))).click();
}`,validate:e=>{let t=e.toLowerCase();return t.includes(`by.id`)&&(t.includes(`webdriverwait`)||t.includes(`expectedconditions`))},simulation:{url:`https://app.com/login`,steps:[{action:`load`,duration:1e3},{action:`find`,target:`login-btn`,duration:1e3,failMsg:`NoSuchElementException: no such element: Unable to locate element: {"method":"xpath","selector":"//div[@class='btn']"}`},{action:`click`,target:`login-btn`,duration:500}]}},2:{title:g(`automation.levels.level2`),desc:g(`automation.levels.level2_desc`),task:`Elementləri Private edin və məlumatları birbaşa metoda ötürün (Hardcoding-dən qaçın).`,initialCode:`public class LoginPage {
    // TODO: Fix Visibility
    public WebElement username = driver.findElement(By.id("user"));
    
    public void login() {
        // TODO: Remove Hardcoded Data
        username.sendKeys("admin"); 
    }
}`,answerCode:`public class LoginPage {
    // Fixed Visibility
    private WebElement username = driver.findElement(By.id("user"));
    
    // Removed Hardcoded Data
    public void login(String user) {
        username.sendKeys(user); 
    }
}`,validate:e=>{let t=e.toLowerCase();return t.includes(`private webelement`)&&(t.includes(`string user`)||t.includes(`string login`)||t.includes(`string username`))},simulation:{url:`https://app.com/login`,steps:[{action:`load`,duration:500},{action:`type`,target:`username-field`,duration:1e3},{action:`success`,msg:`Logged in securely!`}]}},3:{title:g(`automation.levels.level3`),desc:g(`automation.levels.level3_desc`),task:`API Tokeni koddan silin və System.getenv() istifadə edin.`,initialCode:`@Test
public void testApi() {
    // TODO: Hide Token
    String token = "Bearer abc-123-secret";
    
    given().header("Authorization", token).get("/api");
}`,answerCode:`@Test
public void testApi() {
    // Token from Environment
    String token = System.getenv("API_TOKEN");
    
    given().header("Authorization", token).get("/api");
}`,validate:e=>(e.includes(`System.getenv`)||e.includes(`Config.get`))&&!e.includes(`abc-123`),simulation:{url:`API Client`,steps:[{action:`api_call`,duration:1500,failMsg:`SecurityAlert: Hardcoded secret detected in source code!`}]}},4:{title:g(`automation.levels.level4`),desc:g(`automation.levels.level4_desc`),task:`IFrame daxilindəki düyməyə klikləmək üçün əvvəlcə driver.switchTo().frame() istifadə edin.`,initialCode:`@Test
public void testFrame() {
    driver.get("https://app.com/ads");
    
    // TODO: Switch to Frame first
    driver.findElement(By.id("ad-close")).click();
}`,answerCode:`@Test
public void testFrame() {
    driver.get("https://app.com/ads");
    
    // Switch to Frame
    driver.switchTo().frame("ad-frame");
    driver.findElement(By.id("ad-close")).click();
}`,validate:e=>e.includes(`driver.switchTo().frame`),simulation:{url:`https://app.com/ads`,steps:[{action:`load`,duration:800},{action:`find`,target:`ad-frame`,duration:800,failMsg:`ElementNotInteractableException: element not interactable`},{action:`switch`,duration:500},{action:`click`,target:`close-btn`,duration:500}]}},5:{title:g(`automation.levels.level5`),desc:g(`automation.levels.level5_desc`),task:`Alert pəncərəsini qəbul etmək üçün driver.switchTo().alert().accept() istifadə edin.`,initialCode:`@Test
public void testAlert() {
    driver.findElement(By.id("btn")).click();
    
    // TODO: Handle Alert
}`,answerCode:`@Test
public void testAlert() {
    driver.findElement(By.id("btn")).click();
    
    // Handle Alert
    driver.switchTo().alert().accept();
}`,validate:e=>e.includes(`switchTo().alert()`)&&e.includes(`accept()`),simulation:{url:`https://app.com/popup`,steps:[{action:`load`,duration:500},{action:`click`,target:`btn`,duration:500},{action:`alert`,duration:1e3,failMsg:`UnhandledAlertException: unexpected alert open: {Alert text : Confirm?}`},{action:`accept`,duration:500}]}}},K=G[D];(0,w.useEffect)(()=>{k[D]?M(k[D]):M(K.initialCode),P(!1),B([]),R(`idle`),H(`initial`)},[D]);let q=e=>{M(e),A(t=>({...t,[D]:e}))};return(0,T.jsx)(S,{className:`min-h-screen bg-slate-900 text-slate-300 p-6 pt-20 pb-24`,children:(0,T.jsxs)(`div`,{className:`max-w-7xl mx-auto`,children:[(0,T.jsxs)(`div`,{className:`flex items-center justify-between mb-8`,children:[(0,T.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,T.jsx)(m,{to:`/practice`,className:`p-2 bg-slate-800 rounded-xl hover:bg-slate-700 transition-colors`,children:(0,T.jsx)(t,{className:`text-white`})}),(0,T.jsxs)(`div`,{children:[(0,T.jsxs)(`h1`,{className:`text-3xl font-bold text-white flex items-center gap-3`,children:[(0,T.jsx)(i,{size:32,className:`text-cyan-500`}),g(`automation.title`)]}),(0,T.jsx)(`p`,{className:`text-slate-400`,children:g(`automation.description`)})]})]}),(0,T.jsx)(`button`,{onClick:()=>{window.confirm(g(`common.reset_confirm`)||`Are you sure you want to reset progress?`)&&(W([]),O(1),A({}),M(G[1].initialCode),B([]),R(`idle`),H(`initial`))},className:`p-2 text-slate-500 hover:text-red-400 transition-colors`,title:`Reset Progress`,children:(0,T.jsx)(f,{size:20})})]}),(0,T.jsx)(`div`,{className:`flex gap-4 mb-8 overflow-x-auto pb-2`,children:[1,2,3,4,5].map(e=>{let t=e>1&&!U.includes(e-1),n=U.includes(e);return(0,T.jsx)(`button`,{onClick:()=>!t&&O(e),disabled:t,className:`flex-1 min-w-[150px] p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${D===e?`border-cyan-500 bg-cyan-500/10 text-white`:t?`border-slate-800 bg-slate-800/50 text-slate-600 cursor-not-allowed`:`border-slate-700 bg-slate-800 text-slate-400 hover:border-slate-600`}`,children:(0,T.jsxs)(`div`,{className:`flex items-center gap-2`,children:[t?(0,T.jsx)(u,{size:16}):n?(0,T.jsx)(r,{size:16,className:`text-green-500`}):(0,T.jsx)(l,{size:16}),(0,T.jsx)(`span`,{className:`font-bold text-sm`,children:g(`automation.levels.level${e}`)})]})},e)})}),(0,T.jsxs)(`div`,{className:`flex flex-col lg:grid lg:grid-cols-2 gap-6 min-h-[600px]`,children:[(0,T.jsxs)(`div`,{className:`flex flex-col gap-4 order-2 lg:order-1`,children:[(0,T.jsxs)(`div`,{className:`bg-slate-800 rounded-2xl p-6 border border-slate-700 shadow-xl`,children:[(0,T.jsxs)(`div`,{className:`flex items-center gap-2 mb-2`,children:[(0,T.jsx)(h,{className:`text-red-400`}),(0,T.jsx)(`h2`,{className:`text-lg font-bold text-white`,children:g(`automation.task`)})]}),(0,T.jsx)(`p`,{className:`text-slate-300 mb-4`,children:K.task}),(0,T.jsxs)(`div`,{className:`flex gap-2`,children:[(0,T.jsxs)(`button`,{onClick:()=>q(K.initialCode),className:`flex-1 py-2 px-3 rounded-lg bg-slate-700 hover:bg-slate-600 text-white text-sm font-bold flex items-center justify-center gap-2 transition-colors`,children:[(0,T.jsx)(d,{size:14}),`Sıfırla`]}),(0,T.jsxs)(`button`,{onClick:()=>{P(!0),q(K.answerCode)},disabled:N,className:`flex-1 py-2 px-3 rounded-lg border text-sm font-bold flex items-center justify-center gap-2 transition-colors ${N?`bg-emerald-500/20 text-emerald-400 border-emerald-500/30 cursor-default`:`bg-cyan-900/50 hover:bg-cyan-900 border-cyan-500/30 text-cyan-300`}`,children:[(0,T.jsx)(o,{size:14}),N?`Göstərilib`:`Cavab`]})]}),N&&(0,T.jsx)(`div`,{className:`mt-2 text-xs text-amber-500 text-center font-bold`,children:`Cavaba baxdığınız üçün XP verilməyəcək!`})]}),(0,T.jsxs)(`div`,{className:`flex-1 bg-slate-900 rounded-2xl border border-slate-700 overflow-hidden flex flex-col min-h-[400px] shadow-2xl`,children:[(0,T.jsxs)(`div`,{className:`bg-slate-950 px-4 py-2 flex items-center justify-between border-b border-slate-800`,children:[(0,T.jsx)(`span`,{className:`text-xs font-mono text-slate-500`,children:`Test.java`}),(0,T.jsxs)(`button`,{onClick:async()=>{if(F)return;I(!0),R(`running`),B([{time:new Date().toLocaleTimeString(),type:`info`,msg:`Starting test execution...`}]),H(`loading`);let e=K.validate(j),t=K.simulation.steps;for(let n=0;n<t.length;n++){let r=t[n];if(await new Promise(e=>setTimeout(e,r.duration)),!e&&r.failMsg){B(e=>[...e,{time:new Date().toLocaleTimeString(),type:`error`,msg:r.failMsg}]),R(`error`),H(`error`),I(!1);return}let i=``;switch(r.action){case`load`:i=`Navigating to ${K.simulation.url}`;break;case`find`:i=`Found element: ${r.target}`;break;case`click`:i=`Clicked element: ${r.target}`,H(`clicking`);break;case`type`:i=`Typed text into: ${r.target}`,H(`typing`);break;case`switch`:i=`Switched context`;break;case`alert`:i=`Alert detected`;break;case`accept`:i=`Alert accepted`;break;case`api_call`:i=`Sending request...`;break}i&&B(e=>[...e,{time:new Date().toLocaleTimeString(),type:`info`,msg:i}])}if(e){if(B(e=>[...e,{time:new Date().toLocaleTimeString(),type:`success`,msg:`Test Passed Successfully!`}]),R(`success`),H(`success`),!U.includes(D)){let e=[...U,D];W(e);let t=N?0:250;t>0&&v(t),E({xp:y+t,completedLevels:{automation:e},addXP:v,foundBugs:[],moduleBugs:{},getBugDifficulty:()=>`medium`}),x({particleCount:100,spread:70,origin:{y:.6}})}}else B(e=>[...e,{time:new Date().toLocaleTimeString(),type:`error`,msg:`AssertionError: Test logic is incorrect.`}]),R(`error`),H(`error`);I(!1)},disabled:F,className:`px-4 py-1.5 rounded-lg font-bold text-sm flex items-center gap-2 transition-all ${F?`bg-slate-800 text-slate-500 cursor-wait`:`bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-500/20`}`,children:[F?(0,T.jsx)(c,{size:14,className:`animate-spin`}):(0,T.jsx)(s,{size:14,fill:`currentColor`}),g(`automation.run`)]})]}),(0,T.jsx)(`textarea`,{value:j,onChange:e=>q(e.target.value),className:`flex-1 w-full bg-transparent p-4 font-mono text-sm text-cyan-300 focus:outline-none resize-none leading-relaxed`,spellCheck:`false`})]}),(0,T.jsxs)(`div`,{className:`h-[200px] bg-slate-950 rounded-xl border border-slate-800 p-4 overflow-y-auto font-mono text-xs`,children:[(0,T.jsx)(`div`,{className:`text-slate-500 mb-2 sticky top-0 bg-slate-950 pb-2 border-b border-slate-900 uppercase tracking-wider font-bold`,children:g(`automation.console`)}),z.length===0&&(0,T.jsx)(`span`,{className:`text-slate-700 italic`,children:`Ready...`}),z.map((e,t)=>(0,T.jsxs)(`div`,{className:`mb-1 ${e.type===`error`?`text-red-400`:e.type===`success`?`text-green-400`:`text-slate-400`}`,children:[(0,T.jsxs)(`span`,{className:`text-slate-600 mr-2`,children:[`[`,e.time,`]`]}),e.msg]},t))]})]}),(0,T.jsxs)(`div`,{className:`order-1 lg:order-2 bg-slate-200 rounded-2xl overflow-hidden shadow-2xl flex flex-col border-4 border-slate-800 min-h-[300px]`,children:[(0,T.jsxs)(`div`,{className:`bg-slate-100 px-4 py-2 flex items-center gap-4 border-b border-slate-300`,children:[(0,T.jsxs)(`div`,{className:`flex gap-1.5`,children:[(0,T.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-red-400`}),(0,T.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-yellow-400`}),(0,T.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-green-400`})]}),(0,T.jsxs)(`div`,{className:`flex-1 bg-white rounded-md px-3 py-1 text-xs text-slate-500 flex items-center gap-2 shadow-inner`,children:[(0,T.jsx)(a,{size:12}),K.simulation.url]})]}),(0,T.jsxs)(`div`,{className:`flex-1 relative bg-white p-8 flex items-center justify-center`,children:[V===`initial`&&(0,T.jsxs)(`div`,{className:`text-center text-slate-400`,children:[(0,T.jsx)(a,{size:48,className:`mx-auto mb-2 opacity-20`}),(0,T.jsx)(`p`,{children:`Browser Ready`})]}),V===`loading`&&(0,T.jsxs)(`div`,{className:`flex flex-col items-center gap-3`,children:[(0,T.jsx)(c,{size:48,className:`animate-spin text-cyan-500`}),(0,T.jsx)(`p`,{className:`text-slate-500 font-medium`,children:`Loading page...`})]}),(V===`success`||V===`clicking`||V===`typing`)&&(0,T.jsxs)(p.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:`w-full max-w-sm bg-white rounded-xl shadow-lg border border-slate-100 p-6 relative`,children:[(0,T.jsx)(`div`,{className:`h-4 w-24 bg-slate-200 rounded mb-4`}),(0,T.jsxs)(`div`,{className:`space-y-3`,children:[(0,T.jsx)(`div`,{className:`h-10 w-full bg-slate-50 border border-slate-200 rounded-lg relative overflow-hidden`,children:V===`typing`&&(0,T.jsx)(p.div,{initial:{width:0},animate:{width:`60%`},className:`h-full bg-slate-200/50`})}),(0,T.jsx)(`div`,{className:`h-10 w-full rounded-lg flex items-center justify-center text-white font-bold transition-colors ${V===`success`?`bg-green-500`:`bg-cyan-500`}`,children:V===`success`?`Success!`:`Submit`})]}),(0,T.jsx)(p.div,{initial:{x:100,y:100,opacity:0},animate:V===`clicking`?{x:50,y:80,opacity:1,scale:.9}:V===`typing`?{x:50,y:40,opacity:1}:{opacity:0},transition:{duration:.5},className:`absolute top-0 left-0 pointer-events-none text-black drop-shadow-lg`,children:(0,T.jsx)(C,{size:32,fill:`black`,className:`text-white`})})]}),V===`error`&&(0,T.jsxs)(p.div,{initial:{scale:.9},animate:{scale:1,rotate:[0,-2,2,0]},className:`text-center`,children:[(0,T.jsx)(`div`,{className:`w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4`,children:(0,T.jsx)(n,{size:40,className:`text-red-500`})}),(0,T.jsx)(`h3`,{className:`text-xl font-bold text-slate-800 mb-1`,children:`Test Failed`}),(0,T.jsx)(`p`,{className:`text-slate-500 text-sm`,children:`Check console for details`})]})]})]})]})]})})}export{E as default};