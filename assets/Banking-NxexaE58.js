import{t as e}from"./arrow-left-CEuzoGoc.js";import{n as t,t as n}from"./loader-circle-Bbh2fwzJ.js";import{a as r,c as ee,d as i,f as a,i as o,l as s,o as te,r as ne,s as re,t as ie}from"./practiceSpecs-38QTgaUO.js";import"./sparkles-Dqv2FD2G.js";import"./achievements-BHPXEYAx.js";import{t as c}from"./proxy-K3kZNlDc.js";import{_ as l,b as u,f as d,g as f,n as p,t as m}from"./index-BW8FEYQy.js";import{t as h}from"./PageTransition-npdI8hIz.js";import{n as g,t as _}from"./useAchievements-C49npA7c.js";var v=f(`arrow-left-right`,[[`path`,{d:`M8 3 4 7l4 4`,key:`9rb6wj`}],[`path`,{d:`M4 7h16`,key:`6tx8e3`}],[`path`,{d:`m16 21 4-4-4-4`,key:`siv7j2`}],[`path`,{d:`M20 17H4`,key:`h6l3hr`}]]),y=f(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),b=f(`wallet`,[[`path`,{d:`M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1`,key:`18etb6`}],[`path`,{d:`M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4`,key:`xoc0q4`}]]),x=u(),S=d();function C(){let{foundBugs:u,addBug:d,resetProgress:f,getBugDifficulty:C,xp:ae,getBugPoints:oe,deductXP:se}=g(),{newAchievement:w,checkAchievements:ce}=_(),{showAnimation:le,animationData:T,triggerBugAnimation:ue}=ne(),{addLog:de,addRequest:fe}=m(),[E,D]=(0,x.useState)(``),[O,k]=(0,x.useState)(``),[A,j]=(0,x.useState)(`other`),[M,N]=(0,x.useState)(`AZN`),[P,pe]=(0,x.useState)(500),[F,I]=(0,x.useState)({show:!1,message:``}),[L,R]=(0,x.useState)(!1),[z,B]=(0,x.useState)(!1),[V,H]=(0,x.useState)(!1),[U,W]=(0,x.useState)({}),[G,K]=(0,x.useState)({}),[me,he]=(0,x.useState)([{id:1,amount:50,recipient:`Başqa şəxs`,date:`2024-01-20`,status:`completed`},{id:2,amount:100,recipient:`Başqa şəxs`,date:`2024-01-19`,status:`completed`}]),[q]=(0,x.useState)([{id:`neg_amount`,description:`Mənfi məbləğ göndərmək mümkündür`,severity:`Critical`,priority:`High`},{id:`zero_amount`,description:`0 AZN göndərmək mümkündür`,severity:`Major`,priority:`Medium`},{id:`self_transfer`,description:`Öz kartına pul köçürmək olur`,severity:`Major`,priority:`Medium`},{id:`currency_mix`,description:`AZN hesabdan USD köçürmə (konvertasiyasız)`,severity:`Major`,priority:`Medium`},{id:`balance_limit`,description:`Balansdan çox pul göndərmək olur`,severity:`Critical`,priority:`High`},{id:`success_msg`,description:`Uğursuz əməliyyatda "Uğurlu" mesajı çıxır`,severity:`Major`,priority:`Medium`},{id:`decimal_places`,description:`Məbləğ 10+ onluq yerə qəbul edir (0.0000000001)`,severity:`Minor`,priority:`Low`},{id:`desc_xss`,description:`Təsvir sahəsinə <script> tag yazmaq olur`,severity:`Critical`,priority:`High`},{id:`no_confirmation`,description:`Köçürmə təsdiq dialoqusuz icra olunur`,severity:`Major`,priority:`Medium`},{id:`balance_static`,description:`Balans köçürmədən sonra yenilənmir`,severity:`Critical`,priority:`High`},{id:`card_format`,description:`Kart nömrəsi formatı yoxlanılmır`,severity:`Major`,priority:`Medium`},{id:`amount_label`,description:`Məbləğ labelində hərf səhvi: "Məbləğ" əvəzinə "Mebleg"`,severity:`Minor`,priority:`Low`},{id:`btn_alignment`,description:`Köçürmə düyməsi sola yönəlib (mərkəzdə olmalı)`,severity:`Minor`,priority:`Low`},{id:`border_inconsistent`,description:`Input border qalınlığı fərqlidir`,severity:`Minor`,priority:`Low`},{id:`balance_color`,description:`Balans rəngi oxunması çətindir (ağ fonda ağ)`,severity:`Minor`,priority:`Low`},{id:`icon_missing`,description:`Valyuta seçimində ikon yoxdur`,severity:`Minor`,priority:`Low`},{id:`placeholder_typo`,description:`Placeholder səhvi: "0.00" əvəzinə "0,00"`,severity:`Minor`,priority:`Low`},{id:`focus_color`,description:`Focus border rəngi qırmızıdır (yaşıl olmalı)`,severity:`Minor`,priority:`Low`},{id:`history_missing`,description:`Köçürmə tarixçəsi göstərilmir`,severity:`Major`,priority:`Medium`},{id:`loading_indicator`,description:`Yükləmə göstəricisi yoxdur`,severity:`Major`,priority:`Medium`}]),[ge,_e]=(0,x.useState)(!1),[ve,ye]=(0,x.useState)(null),J=e=>{u.includes(e)||(ye(e),_e(!0))},Y=e=>{let t=d(e);if(t.isNew){let n=q.find(t=>t.id===e);I({show:!0,message:n.description}),ue({...t,bugName:n.description}),ce({foundBugs:[...u,e],totalBugs:q.length,moduleBugs:{banking:q},getBugDifficulty:C})}},X=()=>{let e={},t=[],n=parseFloat(E);if(!E)e.amount=`Məbləğ tələb olunur`;else{n<0&&(t.push(`neg_amount`),e.amount=`Mənfi məbləğ göndərilə bilməz`),n===0&&(t.push(`zero_amount`),e.amount=`0 AZN göndərilə bilməz`),n>P&&(t.push(`balance_limit`),e.amount=`Balansınızda kifayət qədər vəsait yoxdur (Balans: ${P} AZN)`);let r=E.split(`.`)[1];r&&r.length>10&&(t.push(`decimal_places`),e.amount=`Məbləğ çox uzun onluq hissəyə malikdir`)}return A===`self`&&(t.push(`self_transfer`),e.recipient=`Öz kartınıza köçürmə edə bilməzsiniz`),M===`USD`&&(t.push(`currency_mix`),e.currency=`AZN hesabdan USD köçürmə mümkün deyil`),(O.includes(`<script>`)||O.includes(`<\/script>`))&&(t.push(`desc_xss`),e.description=`Təsvirdə icazəsiz simvollar var`),t.push(`loading_indicator`),W(e),{isValid:Object.keys(e).length===0,detectedBugs:t}},be=()=>{let{isValid:e,detectedBugs:t}=X(),n=!1;if(t.forEach(e=>{Y(e),u.includes(e)||(n=!0)}),!e){let e=Object.values(U)[0];n||I({show:!0,message:e});return}V||Y(`no_confirmation`),H(!0)},xe=async()=>{H(!1),B(!0),await new Promise(e=>setTimeout(e,1500)),B(!1),P===P&&Y(`balance_static`),Y(`success_msg`),I({show:!0,message:`Köçürmə uğurla tamamlandı! ✅`}),D(``),k(``),W({}),K({})},Z=e=>{K({...G,[e]:!0})},Q=q,$=u.filter(e=>Q.find(t=>t.id===e));return(0,x.useEffect)(()=>{$.length===Q.length&&Q.length>0&&o()},[$.length,Q.length]),(0,S.jsxs)(h,{className:`p-6 pt-12 pb-24 min-h-screen`,children:[(0,S.jsx)(s,{show:F.show,message:F.message,onClose:()=>I({show:!1,message:``})}),(0,S.jsx)(re,{isOpen:L,onClose:()=>R(!1),spec:ie.banking}),(0,S.jsx)(p,{children:le&&T&&(0,S.jsx)(te,{bugName:T.bugName,points:T.points,onComplete:()=>{}})}),w&&(0,S.jsx)(r,{achievement:w,onClose:()=>{}}),(0,S.jsx)(p,{children:V&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4`,onClick:()=>H(!1),children:(0,S.jsxs)(c.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:e=>e.stopPropagation(),className:`bg-white rounded-2xl p-5 shadow-2xl w-full max-w-sm`,children:[(0,S.jsx)(`h3`,{className:`text-lg font-bold text-slate-900 mb-3`,children:`Köçürməni təsdiqləyin`}),(0,S.jsxs)(`div`,{className:`space-y-2 mb-5 text-sm text-slate-600`,children:[(0,S.jsxs)(`p`,{children:[(0,S.jsx)(`strong`,{className:`text-slate-900`,children:`Məbləğ:`}),` `,E,` `,M]}),(0,S.jsxs)(`p`,{children:[(0,S.jsx)(`strong`,{className:`text-slate-900`,children:`Alıcı:`}),` `,A===`self`?`Özünüzə`:`Başqa şəxs`]}),O&&(0,S.jsxs)(`p`,{children:[(0,S.jsx)(`strong`,{className:`text-slate-900`,children:`Təsvir:`}),` `,O]})]}),(0,S.jsxs)(`div`,{className:`flex gap-3`,children:[(0,S.jsx)(`button`,{onClick:()=>H(!1),className:`flex-1 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors text-sm`,children:`Ləğv et`}),(0,S.jsx)(`button`,{onClick:xe,className:`flex-1 py-2.5 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors text-sm`,children:`Təsdiq et`})]})]})})})}),(0,S.jsxs)(`header`,{className:`mb-8`,children:[(0,S.jsxs)(l,{to:`/practice`,className:`inline-flex items-center text-slate-500 mb-4 hover:text-slate-800 transition-colors`,children:[(0,S.jsx)(e,{size:20,className:`mr-1`}),`Geri qayıt`]}),(0,S.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,S.jsxs)(`div`,{children:[(0,S.jsx)(`h1`,{className:`text-3xl font-black text-slate-900 tracking-tight mb-2`,children:`Köçürmələr`}),(0,S.jsxs)(`div`,{className:`flex items-center gap-2 text-slate-500 font-medium`,children:[(0,S.jsx)(i,{size:18}),(0,S.jsxs)(`p`,{children:[`Bu səhifədə `,q.length,` baq gizlənib.`]})]})]}),(0,S.jsx)(`button`,{onClick:()=>R(!0),className:`p-3 bg-indigo-100 text-indigo-600 rounded-xl hover:bg-indigo-200 transition-colors`,children:(0,S.jsx)(a,{size:24})})]})]}),(0,S.jsxs)(`div`,{className:`bg-white p-8 rounded-[2rem] shadow-xl shadow-emerald-200/50 border border-slate-100 relative overflow-hidden mb-8`,children:[(0,S.jsx)(`div`,{className:`absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-emerald-500 to-teal-500`}),(0,S.jsxs)(`div`,{className:`bg-slate-900 text-white p-6 rounded-2xl mb-8 relative overflow-hidden cursor-pointer`,onClick:()=>{J(`balance_color`,`Balans rəngi oxunması çətindir (ağ fonda ağ)`),de(`error`,`Uncaught ReferenceError: WalletConfig is not defined`,{component:`BalanceCard`,line:42})},children:[(0,S.jsxs)(`div`,{className:`relative z-10`,children:[(0,S.jsx)(`p`,{className:`text-slate-400 text-sm mb-1`,children:`Cari Balans`}),(0,S.jsxs)(`h2`,{className:`text-3xl font-bold text-white`,children:[P.toFixed(2),` AZN`]})]}),(0,S.jsx)(b,{className:`absolute right-4 bottom-4 text-slate-800`,size:64})]}),(0,S.jsxs)(`form`,{onSubmit:e=>{e.preventDefault(),be()},className:`space-y-6`,children:[(0,S.jsxs)(`div`,{children:[(0,S.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2`,children:`Kimə (Kart nömrəsi)`}),(0,S.jsxs)(`select`,{className:`w-full p-3 border-2 rounded-xl outline-none focus:border-emerald-500 cursor-pointer bg-white transition-colors ${G.recipient&&U.recipient?`border-red-300`:`border-slate-200`}`,value:A,onChange:e=>{j(e.target.value),e.target.value===`other`&&J(`card_format`,`Kart nömrəsi formatı yoxlanılmır`)},onBlur:()=>Z(`recipient`),children:[(0,S.jsx)(`option`,{value:`other`,children:`Başqa şəxs`}),(0,S.jsx)(`option`,{value:`self`,children:`Özümə (Cari Kart)`})]}),G.recipient&&U.recipient&&(0,S.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,S.jsx)(t,{size:16}),(0,S.jsx)(`span`,{children:U.recipient})]})]}),(0,S.jsxs)(`div`,{children:[(0,S.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2 cursor-pointer`,onClick:()=>J(`amount_label`,`Məbləğ labelində hərf səhvi: "Məbləğ" əvəzinə "Mebleg"`),children:`Mebleg`}),(0,S.jsxs)(`div`,{className:`flex gap-2`,children:[(0,S.jsxs)(`div`,{className:`flex-1`,children:[(0,S.jsx)(`input`,{type:`number`,step:`0.01`,placeholder:`0,00`,className:`w-full p-3 border-2 rounded-xl outline-none focus:border-red-500 transition-colors ${G.amount&&U.amount?`border-red-300`:`border-slate-200`}`,value:E,onChange:e=>D(e.target.value),onBlur:()=>Z(`amount`),onClick:()=>{J(`placeholder_typo`,`Placeholder səhvi: "0.00" əvəzinə "0,00"`),J(`border_inconsistent`,`Input border qalınlığı fərqlidir`),J(`focus_color`,`Focus border rəngi qırmızıdır (yaşıl olmalı)`)}}),G.amount&&U.amount&&(0,S.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,S.jsx)(t,{size:16}),(0,S.jsx)(`span`,{children:U.amount})]})]}),(0,S.jsxs)(`select`,{className:`w-24 p-3 border-2 rounded-xl outline-none focus:border-emerald-500 cursor-pointer bg-white transition-colors ${G.currency&&U.currency?`border-red-300`:`border-slate-200`}`,value:M,onChange:e=>{N(e.target.value),J(`icon_missing`,`Valyuta seçimində ikon yoxdur`)},onBlur:()=>Z(`currency`),children:[(0,S.jsx)(`option`,{value:`AZN`,children:`AZN`}),(0,S.jsx)(`option`,{value:`USD`,children:`USD`})]})]}),G.currency&&U.currency&&(0,S.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,S.jsx)(t,{size:16}),(0,S.jsx)(`span`,{children:U.currency})]})]}),(0,S.jsxs)(`div`,{children:[(0,S.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-2`,children:`Təsvir (İstəyə görə)`}),(0,S.jsx)(`textarea`,{className:`w-full p-3 border-2 rounded-xl outline-none focus:border-emerald-500 resize-none transition-colors ${G.description&&U.description?`border-red-300`:`border-slate-200`}`,rows:`3`,placeholder:`Köçürmə haqqında qeyd...`,value:O,onChange:e=>k(e.target.value),onBlur:()=>Z(`description`)}),G.description&&U.description&&(0,S.jsxs)(`div`,{className:`flex items-center gap-2 mt-2 text-red-600 text-sm`,children:[(0,S.jsx)(t,{size:16}),(0,S.jsx)(`span`,{children:U.description})]})]}),(0,S.jsx)(`button`,{type:`submit`,disabled:z,className:`w-full py-4 bg-emerald-600 text-white rounded-xl font-bold shadow-lg shadow-emerald-200 hover:bg-emerald-700 transition-colors flex items-center justify-start pl-8 gap-2 cursor-pointer disabled:opacity-50`,onClick:()=>{J(`btn_alignment`,`Köçürmə düyməsi sola yönəlib (mərkəzdə olmalı)`)},children:z?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(n,{className:`animate-spin`,size:20}),(0,S.jsx)(`span`,{children:`Emal edilir...`})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(v,{size:20}),(0,S.jsx)(`span`,{children:`Köçürmə et`})]})})]}),(0,S.jsx)(`div`,{className:`mt-8 pt-8 border-t border-slate-100 cursor-pointer opacity-0`,onClick:()=>J(`history_missing`,`Köçürmə tarixçəsi göstərilmir`),children:(0,S.jsxs)(`h3`,{className:`text-sm font-bold text-slate-700 mb-4 flex items-center gap-2`,children:[(0,S.jsx)(y,{size:16}),`Son köçürmələr`]})})]}),(0,S.jsx)(ee,{bugs:Q,foundBugs:$,onReset:f,xp:ae,getBugPoints:oe,getBugDifficulty:C,deductXP:se})]})}export{C as default};