import{t as e}from"./useTranslation-Cij7gsGk.js";import{t}from"./chevron-right-2JbDa2Hj.js";import{t as n}from"./crown-DuUGnuHg.js";import{t as r}from"./loader-circle-DNNk094S.js";import{t as i}from"./sparkles-foQcEsqR.js";import{t as a}from"./user-o78lBLvz.js";import{A as o,S as s,c,d as l,j as u,o as d,s as f}from"./index-DYRLscs1.js";import"./useGameProgress-3N8On7BN.js";import{t as p}from"./useLeaderboard-BPonr_5m.js";import"./logger-z-UmzD0Z.js";var m=u(),h=o(),g=s(),_=e=>{if(!e)return`bg-slate-200`;let t=[`bg-red-500`,`bg-orange-500`,`bg-amber-500`,`bg-green-500`,`bg-emerald-500`,`bg-teal-500`,`bg-cyan-500`,`bg-blue-500`,`bg-indigo-500`,`bg-violet-500`,`bg-purple-500`,`bg-fuchsia-500`,`bg-pink-500`,`bg-rose-500`];return t[e.length%t.length]},v=({children:e})=>typeof document>`u`?null:(0,h.createPortal)(e,document.body),y=({rank:e,user:t,delay:r})=>{let o=e===1,s=e===2,c=o?`h-40`:s?`h-28`:`h-24`,l=o?`bg-gradient-to-b from-yellow-300 to-yellow-500 shadow-yellow-500/30 border-t border-yellow-200`:s?`bg-gradient-to-b from-slate-300 to-slate-400 dark:from-slate-600 dark:to-slate-700 shadow-slate-500/30 border-t border-slate-200`:`bg-gradient-to-b from-orange-300 to-orange-400 dark:from-orange-700 dark:to-orange-800 shadow-orange-500/30 border-t border-orange-200`,u=o?`text-yellow-700/20`:s?`text-slate-600/20 dark:text-slate-900/30`:`text-orange-800/20 dark:text-orange-900/30`;return(0,g.jsxs)(d.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:r,type:`spring`,stiffness:200,damping:20},className:`flex flex-col items-center justify-end w-1/3 relative ${o?`z-20`:`z-10`} hover:z-30 transition-all`,children:[(0,g.jsxs)(`div`,{className:`flex flex-col items-center mb-2 w-full relative z-20 transition-transform ${o?`scale-105`:`scale-95`}`,children:[o&&(0,g.jsx)(n,{className:`text-yellow-300 drop-shadow-md animate-bounce mb-1`,size:28,fill:`currentColor`}),(0,g.jsx)(`div`,{className:`
                    relative flex items-center justify-center rounded-2xl text-white font-black shadow-xl overflow-hidden
                    ${t?_(t.name):`bg-slate-100 dark:bg-slate-800 border-2 border-dashed border-slate-300 dark:border-slate-600`}
                    ${o?`w-20 h-20 text-2xl border-4 border-white dark:border-slate-900`:`w-14 h-14 text-lg border-2 border-white dark:border-slate-900`}
                `,children:t?(0,g.jsx)(`span`,{className:`pb-1`,children:t.name.charAt(0)}):(0,g.jsx)(a,{className:`text-slate-300 dark:text-slate-600`,size:o?32:24})}),t&&(0,g.jsx)(`div`,{className:`bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm px-3 py-1 rounded-full shadow-md border border-slate-100 dark:border-slate-600 mt-1 z-30 relative`,children:(0,g.jsxs)(`span`,{className:`text-[10px] font-black text-slate-900 dark:text-white whitespace-nowrap block leading-none`,children:[t.xp,` XP`]})}),(0,g.jsxs)(`div`,{className:`mt-2 font-bold text-slate-700 dark:text-slate-200 text-center w-full px-1 ${o?`text-sm`:`text-xs`} drop-shadow-sm flex items-center justify-center gap-1`,children:[(0,g.jsx)(`span`,{className:`truncate max-w-[80%]`,children:t?t.name.split(` `)[0]:``}),t?.badges?.includes(`istqb_certified`)&&(0,g.jsxs)(`div`,{className:`relative group/name shrink-0`,children:[(0,g.jsx)(i,{size:14,className:`text-yellow-500`}),(0,g.jsx)(`div`,{className:`absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-slate-900/90 text-white text-[10px] rounded-lg opacity-0 group-hover/name:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50`,children:`ISTQB Sertifikatlı`})]})]})]}),(0,g.jsxs)(`div`,{className:`w-full ${c} ${l} rounded-t-2xl relative flex justify-center items-start pt-4 shadow-xl`,children:[(0,g.jsx)(`div`,{className:`absolute inset-0 bg-white/10 rounded-t-2xl pointer-events-none`}),(0,g.jsx)(`span`,{className:`font-black text-4xl ${u}`,children:e})]})]})};function b(){let{t:n}=e(),{leaders:o,loading:s,userProfile:u,saveProfile:h,updateName:b}=p(),[x,S]=(0,m.useState)(!1),[C,w]=(0,m.useState)(!1),[T,E]=(0,m.useState)(``),[D,O]=(0,m.useState)(!1);(0,m.useEffect)(()=>{!s&&!u&&S(!0)},[s,u]),(0,m.useEffect)(()=>{C&&u&&(E(u.name||``),S(!0))},[C,u]);let k=async e=>{if(e.preventDefault(),!T.trim())return;O(!0);let t;t=C&&u?await b(T.trim()):await h(T.trim()),O(!1),t&&(S(!1),w(!1))};if(s)return(0,g.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900`,children:(0,g.jsx)(r,{className:`animate-spin text-indigo-600`,size:32})});let A=[o[0]||null,o[1]||null,o[2]||null],j=o.slice(3),M=o.findIndex(e=>e.uid===u?.uid)+1,N=o.find(e=>e.uid===u?.uid);return(0,g.jsxs)(`div`,{className:`min-h-screen bg-slate-50 dark:bg-slate-900 pb-32 transition-colors`,children:[(0,g.jsx)(f,{children:x&&(0,g.jsx)(v,{children:(0,g.jsx)(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm`,children:(0,g.jsxs)(d.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:`bg-white dark:bg-slate-800 w-full max-w-sm p-6 rounded-3xl shadow-2xl border border-slate-200 dark:border-slate-700`,children:[C&&(0,g.jsx)(`button`,{onClick:()=>{S(!1),w(!1)},className:`absolute top-4 right-4 p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-400`,children:(0,g.jsx)(c,{size:20})}),(0,g.jsxs)(`div`,{className:`text-center mb-6`,children:[(0,g.jsx)(`div`,{className:`w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-600 dark:text-indigo-400`,children:(0,g.jsx)(a,{size:32})}),(0,g.jsx)(`h2`,{className:`text-2xl font-black text-slate-900 dark:text-white mb-2`,children:C?`Profil Düzəlişi`:`Tanış olaq!`}),(0,g.jsx)(`p`,{className:`text-slate-500 dark:text-slate-400 text-sm`,children:C?`Məlumatlarınızı yeniləyin.`:`Liderlər cədvəlində iştirak etmək üçün adınızı daxil edin.`})]}),(0,g.jsxs)(`form`,{onSubmit:k,children:[(0,g.jsx)(`input`,{type:`text`,value:T,onChange:e=>E(e.target.value),placeholder:`Ad və Soyad`,className:`w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-700 focus:border-indigo-500 focus:ring-0 outline-none transition-all text-slate-900 dark:text-white font-medium mb-4 placeholder:text-slate-400`,autoFocus:!0}),(0,g.jsx)(`button`,{type:`submit`,disabled:!T.trim()||D,className:`w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2`,children:D?(0,g.jsx)(r,{className:`animate-spin`,size:20}):(0,g.jsxs)(g.Fragment,{children:[C?`Yadda Saxla`:`Davam et`,(0,g.jsx)(t,{size:20})]})})]})]})})})}),(0,g.jsxs)(`div`,{className:`bg-indigo-600 pt-16 pb-32 px-6 rounded-b-[3rem] shadow-xl relative overflow-hidden mb-[-60px]`,children:[(0,g.jsx)(`div`,{className:`absolute top-0 left-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -ml-20 -mt-20`}),(0,g.jsx)(`div`,{className:`absolute bottom-0 right-0 w-48 h-48 bg-purple-500/20 rounded-full blur-2xl -mr-10 -mb-10`}),(0,g.jsxs)(`div`,{className:`relative z-10`,children:[(0,g.jsxs)(`h1`,{className:`text-3xl font-black text-white text-center mb-2 flex items-center justify-center gap-2`,children:[(0,g.jsx)(l,{className:`text-yellow-300`,size:32}),`Liderlər Cədvəli`]}),(0,g.jsx)(`p`,{className:`text-indigo-100 text-center text-sm font-medium opacity-90`,children:`Ən güclü QA mütəxəssisləri`})]})]}),(0,g.jsxs)(`div`,{className:`px-4 relative z-20`,children:[(0,g.jsxs)(`div`,{className:`flex items-end justify-center gap-2 mb-4 px-2 max-w-md mx-auto`,children:[(0,g.jsx)(y,{rank:2,user:A[1],delay:.1}),(0,g.jsx)(y,{rank:1,user:A[0],delay:0}),(0,g.jsx)(y,{rank:3,user:A[2],delay:.2})]}),(0,g.jsx)(`div`,{className:`space-y-3 pb-8 bg-white dark:bg-slate-800 rounded-t-[2.5rem] pt-8 -mx-4 px-6 min-h-[200px] shadow-xl border-t border-slate-100 dark:border-slate-700 relative z-10`,children:j.length>0?j.map((e,t)=>(0,g.jsxs)(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},className:`rounded-2xl p-4 flex items-center gap-4 shadow-sm border transition-all ${e.uid===u?.uid?`bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 ring-1 ring-indigo-500/30`:`bg-slate-50 dark:bg-slate-900 border-slate-100 dark:border-slate-700`}`,children:[(0,g.jsx)(`div`,{className:`font-bold text-slate-400 w-6 text-center`,children:t+4}),(0,g.jsx)(`div`,{className:`w-10 h-10 min-w-[2.5rem] rounded-xl ${_(e.name)} flex items-center justify-center text-white font-bold shadow-sm`,children:e.name.charAt(0)}),(0,g.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,g.jsxs)(`div`,{className:`font-bold text-slate-900 dark:text-white flex items-center gap-2`,children:[(0,g.jsxs)(`span`,{className:`truncate`,children:[e.name,` `,e.uid===u?.uid&&(0,g.jsx)(`span`,{className:`text-[10px] bg-indigo-100 text-indigo-600 px-1.5 rounded font-bold`,children:`(Sən)`})]}),e.badges&&e.badges.includes(`istqb_certified`)&&(0,g.jsxs)(`div`,{className:`relative group/list-item shrink-0`,children:[(0,g.jsx)(i,{size:16,className:`text-yellow-500`}),(0,g.jsx)(`div`,{className:`absolute left-0 top-full mt-1 px-2 py-1 bg-slate-900/90 text-white text-[10px] rounded-lg opacity-0 group-hover/list-item:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50`,children:`ISTQB Sertifikatlı`})]})]}),(0,g.jsxs)(`div`,{className:`text-xs text-slate-500 font-medium`,children:[`Level `,e.level]})]}),(0,g.jsxs)(`div`,{className:`text-indigo-600 dark:text-indigo-400 font-bold whitespace-nowrap`,children:[e.xp,` XP`]})]},e.id)):(0,g.jsx)(`div`,{className:`text-center py-8 text-slate-400 text-sm font-medium`,children:`Digər iştirakçılar hələ qoşulmayıb.`})})]}),(0,g.jsx)(v,{children:(0,g.jsx)(f,{children:M>3&&N&&(0,g.jsx)(d.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:`fixed bottom-24 left-4 right-4 z-[60]`,children:(0,g.jsxs)(`div`,{className:`bg-indigo-900/90 backdrop-blur-md text-white rounded-2xl p-4 shadow-2xl shadow-indigo-900/50 flex items-center gap-4 border border-indigo-500/30 max-w-md mx-auto`,children:[(0,g.jsxs)(`div`,{className:`font-black text-indigo-300 w-8 text-center text-lg`,children:[`#`,M]}),(0,g.jsx)(`div`,{className:`w-10 h-10 min-w-[2.5rem] rounded-xl ${_(N.name)} flex items-center justify-center text-white font-bold shadow-sm border-2 border-white/20`,children:N.name.charAt(0)}),(0,g.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,g.jsxs)(`div`,{className:`font-bold text-white flex items-center gap-2`,children:[(0,g.jsxs)(`span`,{className:`truncate`,children:[N.name,` `,(0,g.jsx)(`span`,{className:`text-[10px] bg-white/20 px-1.5 rounded font-bold`,children:`(Sən)`})]}),N.badges&&N.badges.includes(`istqb_certified`)&&(0,g.jsxs)(`div`,{className:`relative group/sticky-item shrink-0`,children:[(0,g.jsx)(i,{size:16,className:`text-yellow-500`}),(0,g.jsx)(`div`,{className:`absolute left-0 top-full mt-1 px-2 py-1 bg-slate-900/90 text-white text-[10px] rounded-lg opacity-0 group-hover/sticky-item:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50`,children:`ISTQB Sertifikatlı`})]})]}),(0,g.jsx)(`div`,{className:`text-xs text-indigo-200 font-medium`,children:`Sənin nəticən`})]}),(0,g.jsx)(`div`,{className:`flex items-center gap-3`,children:(0,g.jsxs)(`div`,{className:`text-white font-black whitespace-nowrap bg-white/10 px-3 py-1 rounded-lg`,children:[N.xp,` XP`]})})]})})})})]})}export{b as default};