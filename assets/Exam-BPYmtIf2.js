import{t as e}from"./useTranslation-CZ9xHxJN.js";import{t}from"./arrow-right-W8-RfsoR.js";import{t as n}from"./award-Cy4ls2YA.js";import{t as r}from"./circle-check-big-B22zqBBM.js";import{t as i}from"./clock-C1-5ikDl.js";import{t as a}from"./sparkles-OBPY9Zgb.js";import{O as o,S as s,j as c,o as l,s as u}from"./index-L6i9Tykn.js";import{t as d}from"./useGameProgress-DJOXUuUo.js";import{t as f}from"./PageTransition-BxzcKw6d.js";import{i as p,n as m,r as h}from"./examQuestions-pttkk6VG.js";var g=c();function _(){let[e,t]=(0,g.useState)(`easy`),[n,r]=(0,g.useState)(0),[i,a]=(0,g.useState)(0),[o,s]=(0,g.useState)(new Set),[c,l]=(0,g.useState)(localStorage.getItem(`studentLevel`)||`Beginner`),u=(0,g.useCallback)((c=null)=>{let l=e;if(c===!0){let i=n+1;r(i),a(0),i>=3&&e!==`hard`&&(l=e===`easy`?`medium`:`hard`,t(l),r(0))}else if(c===!1){let n=i+1;a(n),r(0),n>=3&&e!==`easy`&&(l=e===`hard`?`medium`:`easy`,t(l),a(0))}let u=h(l).filter(e=>!o.has(e.id)),f=null;if(u.length>0)f=u[Math.floor(Math.random()*u.length)];else{let e=m.filter(e=>!o.has(e.id));e.length>0&&(f=e[Math.floor(Math.random()*e.length)])}return f&&s(e=>new Set(e).add(f.id)),d(l),{question:f,difficulty:l}},[e,n,i,o]),d=e=>{let t=`Beginner`;e===`medium`&&(t=`Intermediate`),e===`hard`&&(t=`Advanced`),l(t),localStorage.setItem(`studentLevel`,t)};return{getNextQuestion:u,currentDifficulty:e,studentLevel:c,resetExam:()=>{t(`easy`),r(0),a(0),s(new Set)}}}var v=s();function y(){let{t:s}=e(),c=o(),{getNextQuestion:m,currentDifficulty:h,resetExam:y}=_(),{addXP:b}=d(),[x,S]=(0,g.useState)([]),[C,w]=(0,g.useState)(0),[T,E]=(0,g.useState)(null),[D,O]=(0,g.useState)([]),[k,A]=(0,g.useState)(900),[j,M]=(0,g.useState)(!1),[N,P]=(0,g.useState)(!1),F=e=>{let t=e.options.map((e,t)=>({text:e,originalIndex:t})).sort(()=>Math.random()-.5),n=t.findIndex(t=>t.originalIndex===e.correctAnswer);return{...e,options:t.map(e=>e.text),correctAnswer:n}};(0,g.useEffect)(()=>{N||S(p(30).map(F))},[N]),(0,g.useEffect)(()=>{if(!j||k<=0)return;let e=setInterval(()=>{A(e=>e<=1?(z(),0):e-1)},1e3);return()=>clearInterval(e)},[j,k]);let I=()=>{N&&(y(),S([F(m(null).question)])),A(900),M(!0)},L=e=>{E(e)},R=()=>{let e=[...D];e[C]=T,O(e);let t=T===x[C].correctAnswer;if(N)if(C+1<30){let e=m(t);S(t=>[...t,F(e.question)]),w(C+1),E(null)}else z(e);else C+1<x.length?(w(C+1),E(D[C+1]??null)):z(e)},z=(e=D)=>{let t=0,n={};x.forEach((r,i)=>{let a=e[i];a===r.correctAnswer&&t++,n[r.category]||(n[r.category]={correct:0,total:0}),n[r.category].total++,a===r.correctAnswer&&n[r.category].correct++});let r=t*10;r>0&&b(r),c(`/practice/exam-results`,{state:{foundCount:t,totalQuestions:x.length,categoryScores:n,userAnswers:e,questions:x,timeSpent:900-k,xpEarned:r}})},B=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,`0`)}`;if(x.length===0)return(0,v.jsx)(f,{className:`min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-800 flex items-center justify-center`,children:(0,v.jsx)(`div`,{className:`text-slate-600 dark:text-slate-400`,children:`Yüklənir...`})});if(!j)return(0,v.jsx)(f,{className:`min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-800 p-6 pt-12 pb-24`,children:(0,v.jsx)(`div`,{className:`max-w-2xl mx-auto`,children:(0,v.jsxs)(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8`,children:[(0,v.jsx)(`div`,{className:`flex justify-center mb-6`,children:(0,v.jsx)(`div`,{className:`w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center`,children:(0,v.jsx)(n,{size:40,className:`text-white`})})}),(0,v.jsx)(`h1`,{className:`text-3xl font-black text-center text-slate-900 dark:text-white mb-4`,children:`QA Bilik İmtahanı`}),(0,v.jsxs)(`div`,{className:`space-y-4 mb-8`,children:[(0,v.jsxs)(`div`,{className:`flex gap-4 mb-6`,children:[(0,v.jsxs)(`button`,{onClick:()=>P(!1),className:`flex-1 p-4 rounded-xl border-2 transition-all ${N?`border-slate-200 dark:border-slate-700 hover:border-blue-300`:`border-blue-500 bg-blue-50 dark:bg-blue-900/20`}`,children:[(0,v.jsx)(`div`,{className:`font-bold text-slate-900 dark:text-white mb-1`,children:`Standart`}),(0,v.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Təsadüfi suallar`})]}),(0,v.jsxs)(`button`,{onClick:()=>P(!0),className:`flex-1 p-4 rounded-xl border-2 transition-all ${N?`border-purple-500 bg-purple-50 dark:bg-purple-900/20`:`border-slate-200 dark:border-slate-700 hover:border-purple-300`}`,children:[(0,v.jsxs)(`div`,{className:`flex items-center justify-center gap-2 font-bold text-slate-900 dark:text-white mb-1`,children:[`Adaptiv `,(0,v.jsx)(a,{size:14,className:`text-purple-500`})]}),(0,v.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Səviyyəyə uyğun`})]})]}),(0,v.jsxs)(`div`,{className:`flex items-center gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl`,children:[(0,v.jsx)(r,{className:`text-blue-600 dark:text-blue-400`,size:24}),(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`p`,{className:`font-bold text-slate-900 dark:text-white`,children:`30 sual`}),(0,v.jsx)(`p`,{className:`text-sm text-slate-600 dark:text-slate-400`,children:`QA nəzəriyyəsi üzrə`})]})]}),(0,v.jsxs)(`div`,{className:`flex items-center gap-3 p-4 bg-orange-50 dark:bg-orange-900/20 rounded-xl`,children:[(0,v.jsx)(i,{className:`text-orange-600 dark:text-orange-400`,size:24}),(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`p`,{className:`font-bold text-slate-900 dark:text-white`,children:`15 dəqiqə`}),(0,v.jsx)(`p`,{className:`text-sm text-slate-600 dark:text-slate-400`,children:`Vaxt limiti`})]})]}),(0,v.jsxs)(`div`,{className:`flex items-center gap-3 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl`,children:[(0,v.jsx)(n,{className:`text-green-600 dark:text-green-400`,size:24}),(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`p`,{className:`font-bold text-slate-900 dark:text-white`,children:`70% keçid balı`}),(0,v.jsx)(`p`,{className:`text-sm text-slate-600 dark:text-slate-400`,children:`Minimum tələb`})]})]})]}),(0,v.jsxs)(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:I,className:`w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all shadow-lg`,children:[`İmtahana Başla`,(0,v.jsx)(t,{size:20})]})]})})});let V=x[C],H=(C+1)/x.length*100;return(0,v.jsx)(f,{className:`min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-800 p-6 pt-12 pb-24`,children:(0,v.jsxs)(`div`,{className:`max-w-3xl mx-auto`,children:[(0,v.jsxs)(`div`,{className:`mb-6 flex items-center justify-between`,children:[(0,v.jsxs)(`div`,{className:`flex items-center gap-2 text-slate-600 dark:text-slate-400`,children:[(0,v.jsxs)(`span`,{className:`font-bold text-lg`,children:[`Sual `,C+1]}),(0,v.jsx)(`span`,{children:`/`}),(0,v.jsx)(`span`,{children:N?30:x.length}),N&&(0,v.jsx)(`span`,{className:`ml-2 px-2 py-1 rounded text-xs font-bold uppercase ${h===`easy`?`bg-green-100 text-green-700`:h===`medium`?`bg-yellow-100 text-yellow-700`:`bg-red-100 text-red-700`}`,children:h})]}),(0,v.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 rounded-xl font-bold ${k<60?`bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400`:`bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400`}`,children:[(0,v.jsx)(i,{size:20}),(0,v.jsx)(`span`,{className:`text-lg font-mono`,children:B(k)})]})]}),(0,v.jsx)(`div`,{className:`w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 mb-8`,children:(0,v.jsx)(l.div,{initial:{width:0},animate:{width:`${H}%`},className:`bg-gradient-to-r from-blue-500 to-indigo-500 h-full rounded-full`})}),(0,v.jsx)(u,{mode:`wait`,children:(0,v.jsxs)(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:`bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 mb-6`,children:[(0,v.jsx)(`h2`,{className:`text-2xl font-bold text-slate-900 dark:text-white mb-8`,children:V.question}),(0,v.jsx)(`div`,{className:`space-y-3`,children:V.options.map((e,t)=>(0,v.jsx)(l.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>L(t),className:`w-full p-4 rounded-xl text-left transition-all ${T===t?`bg-blue-600 text-white shadow-lg`:`bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white hover:bg-slate-100 dark:hover:bg-slate-600`}`,children:(0,v.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,v.jsx)(`div`,{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${T===t?`bg-white text-blue-600`:`bg-slate-200 dark:bg-slate-600 text-slate-600 dark:text-slate-300`}`,children:String.fromCharCode(65+t)}),(0,v.jsx)(`span`,{className:`flex-1`,children:e})]})},t))})]},C)}),(0,v.jsxs)(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:R,disabled:T===null,className:`w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all ${T===null?`bg-slate-200 dark:bg-slate-700 text-slate-400 dark:text-slate-500 cursor-not-allowed`:`bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg`}`,children:[C+1===x.length?`Bitir`:`Növbəti Sual`,(0,v.jsx)(t,{size:20})]})]})})}export{y as default};